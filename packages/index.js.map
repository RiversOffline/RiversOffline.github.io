{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/@babel/runtime/regenerator/index.js","webpack:///./node_modules/@babel/runtime/helpers/typeof.js","webpack:///./node_modules/@babel/runtime/helpers/asyncToGenerator.js","webpack:///./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack:///./loadUSGS.js","webpack:///./sort.js","webpack:///./index.js","webpack:///./node_modules/regenerator-runtime/runtime.js","webpack:///./virtualGauges.js","webpack:///./graph.js","webpack:///./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack:///./TopBar.js","webpack:///./River.js","webpack:///./addGraphs.js","webpack:///./flowInfoCalculations.js","webpack:///./search.js","webpack:///./distance.js","webpack:///./createLegend.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_typeof2","obj","iterator","constructor","_typeof","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","then","fn","self","this","args","arguments","apply","err","undefined","arrayWithoutHoles","iterableToArray","nonIterableSpread","arr","usgsarray","virtualGauges","require","updateUSGSDataInfo","window","usgsDataAge","Date","now","requestTime","updateOldDataWarning","toDelete","document","getElementById","remove","loadNewUSGS","oldDataWarning","createElement","id","innerHTML","Math","floor","reloadButton","addEventListener","loadUSGS","appendChild","legend","parentNode","insertBefore","setInterval","_ref","_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default","_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","timeToRequest","sites","values","_i","usgsID","url","usgsdata","response","request","_response","notes","_i2","virtualGaugeCalculations","_loop","_i4","eventDispatched","wrap","_context","prev","next","abrupt","riverarray","length","usgs","relatedusgs","concat","isNaN","Number","indexOf","push","join","toISOString","fetch","sent","json","XMLHttpRequest","onload","event","target","open","send","JSON","parse","queryInfo","note","title","getTime","timeSeries","forEach","obj2","units","variable","variableDescription","sitecode","sourceInfo","siteCode","obj3","siteName","variablecode","variableCode","console","log","river","ItemHolder","updateUSGSData","elem","base","expanded","replacement","replaceChild","dispatchEvent","Event","e","toLowerCase","startsWith","createVirtualGauge","all","setTimeout","stop","simpleSort","list","propertyName","sort","b","alphabeticalsort","reverse","ratingsort","rating","String","parseFloat","shift","skillsort","ToNum","skill","method","noData","hasDam","hasGauge","hasGaugeAndDam","knownState","item","running","flow","dam","alert","runningSort","__webpack_exports__","oldresult","_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__","_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_2__","_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_2___default","navigator","serviceWorkerMessages","serviceWorker","ready","registration","onmessage","data","includes","oldLoadUSGS","addLine","assign","River","map","index","timesNewListCalled","NewList","query","type","orderedlist","slice","normalSearch","recursiveAssign","defaultAdvancedSearchParameters","advancedSearch","nlist","plat","plon","distanceto","div","TopBar","searchbox","_objectsEqual","obj1","objectsEqual","getAdvancedSearchParameters","parameters","section","writeup","distance","lat","lon","location","includeUnknown","checked","tags","includeDams","deleteMatchingPortions","Array","status","num","progress","position","output","coords","repeat","geolocation","getCurrentPosition","t0","code","message","clearInterval","latitude","longitude","accuracy","keyCode","blur","root","href","lastIndexOf","link","encodeURI","stringify","hash","search","decodeURI","oldQuery","dataNowLoaded","confirm","removeEventListener","searchNotFinished","runtime","Op","hasOwn","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","context","Context","_invoke","state","GenStateSuspendedStart","GenStateExecuting","Error","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","_sent","dispatchException","record","tryCatch","GenStateSuspendedYield","makeInvokeMethod","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","Gp","defineIteratorMethods","AsyncIterator","previousPromise","callInvokeWithMethodAndArg","invoke","result","__await","unwrapped","TypeError","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","displayName","isGeneratorFunction","genFun","ctor","setPrototypeOf","__proto__","awrap","async","iter","toString","keys","pop","skipTempReset","charAt","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function","oldUSGSDataAge","updatePromise","sandbox","contentWindow","postMessage","resolveOnConfirmation","origin","source","usgsSites","gaugeID","function","virtualgauge","URL","src","receiveResult","style","display","body","GraphName","timeframe","Source","canvas","horizontal","vertical","color","graphtype","numplace","endcolor","height","width","ctx","getContext","warn","lineWidth","ceil","min","beginPath","calcvertical","vscale","max","hscale","_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default","voffset","hoffset","px","font","fillStyle","strokeStyle","grd","createLinearGradient","addColorStop","start","Text","precision","round","toFixed","fillText","formatDate","date","time","getHours","getMinutes","getMonth","getDate","getFullYear","darkMode","time1","time2","time3","starttime","endtime","midtime","textAlign","preciplist","fulldayprecip","halfdayprecip","H","Value","V","moveTo","valid","lineTo","stroke","isArray","arr2","from","NewSpan","span","className","addSorting","onclick","button","empty","opacity","realContent","left","bottom","Node","removeChild","addGraphs","calculateColor","calculateAge","calculateDirection","createStripes","newColor","oldColor","background","locate","forceregenerate","finished","AddSpan","text","localStorage","getItem","skillSpan","tooltip","tooltiptext","?","FW","B","N","LI","I","HI","A","E","borderBottom","classList","add","spacer","zIndex","full","latestCfs","latestFeet","cfs","feet","backgroundColor","highlighted","addUSGSGraphs","relatedGauge","dataAge","addDisclaimer","disclaimer","fontWeight","isVirtualGauge","addedUSGSDisclaimer","marginTop","marginBottom","addedVirtualGaugeDisclaimer","timeEnd","rel","tlat","tlon","flowRange","aw","padding","nextSibling","addHandlers","updateExpansion","Remove","Code","ToDelete","createcanvas","fillRect","toparts","timestamps","dateTime","addCanvasAsImage","appendTo","img","toDataURL","temp","precip","parts","addFlowGraph","addTempGraph","addPrecipGraph","usgsNumber","usgsData","current","previous","options","str","split","trim","currentType","match","minrun","maxrun","midflow","pow","log10","lowflow","highflow","calculateRatio","low","high","lightness","sortUtils","stringQuery","content","matchCase","stringFilter","skillToNumber","skillFilter","passes","ratingFilter","calculateDistance","lambert","locationFilter","maxDistance","lat1","lon1","lat2","hidlat","lon2","hidlon","flowFilter","tagsFilter","components","compareNames","river1","river2","sorted","filter","advanced_search_modal","PI","reducedLat1","atan","tan","reducedLat2","angle","acos","sin","cos","q","flattening","updateLegend","clearRect","fontSize","getComputedStyle","firstChild","getPropertyValue","tooLowLightness","tooHighLightness","normalValueLightness","documentElement","clientWidth","gradient","redColor","blueColor","drawColors","drawText","elementOffset","offsetTop","pageYOffset","top","paddingTop","makeSticky"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 15);\n","module.exports = require(\"regenerator-runtime\");\n","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","self.usgsarray = {}\nlet virtualGauges = require(\"./virtualGauges.js\")\n\nwindow.updateOldDataWarning = function() {\n\n\t\tlet toDelete = document.getElementById(\"topOldDataWarning\")\n\t\tif (toDelete) {toDelete.remove()}\n\n\t\tif (!window.usgsDataAge) {return}\n\t\t//No reason to make an old data warning when data is new (within 1 hour)\n\t\t//Make sure to change the warning text so that if the data becomes old while the page is open, they are not confused.\n\t\tif (window.usgsDataAge < 1000*60*60) {\n\t\t\twindow.loadNewUSGS = \"USGS Data has become old while this page was open. Click try again to update.\"\n\t\t\treturn\n\t\t}\n\n\t\tlet oldDataWarning = document.createElement(\"p\")\n\t\toldDataWarning.id = \"topOldDataWarning\"\n\n\t\toldDataWarning.innerHTML = \"All river data is more than \" + Math.floor(window.usgsDataAge/1000/60/60) + \" hours old! \"\n\t\toldDataWarning.innerHTML += \"(\" + window.loadNewUSGS + \") \"\n\n\t\t\t\t\tlet reloadButton = document.createElement(\"button\")\n\n\t\t\t\t\t\treloadButton.addEventListener(\"click\", function() {\n\t\t\t\t\t\t\twindow.loadNewUSGS = \"Trying to Load Data\"\n\t\t\t\t\t\t\trequire(\"./loadUSGS.js\").loadUSGS()\n\t\t\t\t\t\t})\n\t\t\t\t\t\treloadButton.innerHTML = \"Try Again\"\n\n\n\t\t\t\t\toldDataWarning.appendChild(reloadButton)\n\n\n\t\tlet legend = document.getElementById(\"legend\")\n\t\tlegend.parentNode.insertBefore(oldDataWarning, legend)\n}\n\n\nfunction updateUSGSDataInfo() {\n\twindow.usgsDataAge = Date.now() - window.requestTime\n\twindow.updateOldDataWarning()\n}\nsetInterval(updateUSGSDataInfo, 1000*60*1) //Every minute, make sure that the data has not become old. If it has, display a warning.\n\nlet loadUSGS = async function() {\n\n\t//Gaurd against infinite recursion. Ignores calls when data is new. (within 5 minutes)\n\tif (window.usgsDataAge < 1000*60*5) {\n\t\treturn;\n\t}\n\n\tlet timeToRequest = 1000*86400 //Milliseconds of time to request\n\n    var sites = []\n    for (let i=0;i<riverarray.length;i++) {\n\t\tlet values = [riverarray[i].usgs]\n\t\triverarray[i].relatedusgs && values.concat(riverarray[i].relatedusgs)\n\t\tfor (let i=0;i<values.length;i++) {\n\t\t\tlet usgsID = values[i]\n\t\t\tif (!usgsID) {continue}\n\t\t\t//Gauges used by virtual gauges should be in relatedusgs\n\t\t\t//Basic value validation (throws out virtual gauges and clearly incorrect numbers.)\n\t        if (usgsID.length > 7 && usgsID.length < 16 && !isNaN(Number(usgsID))) {\n\t            (sites.indexOf(usgsID) === -1) && sites.push(usgsID) //Add the site if it doesn't exist in the list.\n\t        }\n\t\t}\n    }\n    let url = \"https://waterservices.usgs.gov/nwis/iv/?format=json&sites=\" + sites.join(\",\") +  \"&startDT=\" + new Date(Date.now()-timeToRequest).toISOString()  + \"&parameterCd=00060,00065,00010,00045&siteStatus=all\"\n\n    let usgsdata;\n    if (window.fetch) {\n        let response = await fetch(url)\n        usgsdata = await response.json()\n    }\n    else {\n        //For browsers that don't support fetch\n        let request = new XMLHttpRequest()\n        let response = await new Promise((resolve, reject) => {\n            request.onload = function(event) {resolve(event.target.response)};\n            request.open(\"GET\", url);\n            request.send()\n        })\n        usgsdata = JSON.parse(response)\n    }\n\n\n\tlet notes = usgsdata.value.queryInfo.note\n\t//Find where requestDT is located. (never seen it outside position 3)\n\tfor (let i=0;i<notes.length;i++) {\n\t\tif (notes[i].title === \"requestDT\") {\n\t\t\twindow.requestTime = new Date(notes[i].value).getTime();\n\t\t\tupdateUSGSDataInfo()\n\t\t\tbreak;\n\t\t}\n\t}\n\twindow.updateOldDataWarning()\n\n\n    //Iterate through all known conditions\n    usgsdata.value.timeSeries.forEach(function(event){\n        let obj2 = {}\n        obj2.values = event.values[0].value //The values - ex. Gauge Height Array\n\n        if (obj2.values.length === 0) {\n            console.log(\"Empty Array. Skipping\")\n            return;\n        }\n\n        obj2.units = event.variable.variableDescription //Units of values\n\n        let sitecode = event.sourceInfo.siteCode[0].value\n        //See if the site is already in the array.\n        //If the site code is not in the array, add it.\n        if (!usgsarray[sitecode]) {\n            let obj3 = {}\n            obj3.name = event.sourceInfo.siteName\n            usgsarray[sitecode] = obj3\n        }\n\n        let variablecode = event.variable.variableCode[0].value\n\n        //Convert celcius to farenheight\n        if (variablecode === \"00010\" && obj2.units === \"Temperature, water, degrees Celsius\") {\n            for (let i=0;i<obj2.values.length;i++) {\n                obj2.values[i].value = obj2.values[i].value * 1.8 + 32\n            }\n\n            obj2.units = \"Temperature, water, degrees Fahrenheit\"\n        }\n\n\n        //Add the values onto the site code object\n        usgsarray[sitecode][variablecode] = obj2\n    })\n\n\tlet virtualGaugeCalculations = [] //Calculations to wait for before dispatching usgsDataUpdated event to window.\n\n    //Add USGS Data to Graph\n    for (let i=0;i<ItemHolder.length;i++) {\n        let river = ItemHolder[i]\n\n\t\t//Auxillary function\n\t\t//Adds river data to river objects, and updates them for the new information.\n\n\t\tfunction updateUSGSData() {\n\t            //item.create(true) will force regeneration of the button\n\t            //Replace the current button so that the flow info shows\n\t            let elem = document.getElementById(river.base + \"1\")\n\t            let expanded = river.expanded\n\t            let replacement = river.create(true) //Update the version in cache\n\t            try {\n\t                elem.parentNode.replaceChild(replacement, elem)\n\t                //If the river was expanded before, keep it expanded\n\t                if (expanded) {\n\t                    replacement.dispatchEvent(new Event(\"click\"))\n\t                    replacement.dispatchEvent(new Event(\"click\"))\n\t                }\n\t            }\n\t            catch (e) {} //The list must have been sorted - the node was not currently being displayed.\n\t\t}\n\n\t\tif (river.usgs && river.usgs.toLowerCase().startsWith(\"virtual:\")) {\n\t\t\tvirtualGaugeCalculations.push(virtualGauges.createVirtualGauge(river).then(updateUSGSData))\n\t\t} //Create the virtual gauge and add it to usgsarray.\n\t\telse {updateUSGSData()}\n    }\n\n\t//Wait on virtual gauges for up to 1.2 seconds before dispatching usgsDataUpdated event.\n\tlet eventDispatched = false\n\tPromise.all(virtualGaugeCalculations).then(() => {\n\t\twindow.dispatchEvent(new Event(\"usgsDataUpdated\"))\n\t\teventDispatched = true\n\n\t})\n\tsetTimeout(function() {\n\t\tif (!eventDispatched) {\n\t\t\twindow.dispatchEvent(new Event(\"usgsDataUpdated\"))\n\t\t}\n\t}, 1200)\n}\n\n\nexport {\nloadUSGS\n}\n","function simpleSort(list, propertyName) {\n    list.sort(function(a,b) {\n        if (a[propertyName] > b[propertyName]) {\n            return 1;\n        }\n        if (a[propertyName] < b[propertyName]) {\n            return -1;\n        }\n        return 0;\n    })\n    return list\n}\n\n\nfunction alphabeticalsort(list, reverse) {\n    list = simpleSort(list, \"name\")\n\n    if (reverse) {\n        list.reverse()\n    }\n\n    return list\n}\n\nfunction ratingsort(list, reverse) {\n\t//In the sorting, the numbers all come before the letters\n\t//Convert numbers to strings so that we are comparng the same type, and do not always get false.\n\t//Convert back after.\n\n\tfor (let i=0;i<list.length;i++) {\n\t\tif (typeof list[i].rating === \"number\") {\n\t\t\tlist[i].rating = String(list[i].rating)\n\t\t}\n\t}\n\n    list = simpleSort(list, \"rating\")\n\n\tfor (let i=0;i<list.length;i++) {\n\t\tif (!isNaN(parseFloat(list[i].rating))) {\n\t\t\tlist[i].rating = parseFloat(list[i].rating)\n\t\t}\n\t}\n\n\t//The list is backwards. Reverse it if reverse is NOT specified.\n\tif (!reverse) {\n        list.reverse()\n    }\n\n    //Move error values to end\n    while (list[0].rating === \"Error\") {\n        list.push(list.shift())\n    }\n    return list\n}\n\n\nfunction skillsort(list, reverse) {\n    list.sort(function(a,b) {\n\n        function ToNum(value) {\n\n            switch (value.skill) {\n                case \"FW\":\n                    value = 1;\n                    break;\n                case \"B\":\n                    value = 2;\n                    break;\n                case \"N\":\n                    value = 3;\n                    break;\n                case \"LI\":\n                    value = 4;\n                    break;\n                case \"I\":\n                    value = 5;\n                    break;\n                case \"HI\":\n                    value = 6;\n                    break;\n                case \"A\":\n                    value = 7;\n                    break;\n                case \"E\":\n                    value = 8;\n                    break;\n                default:\n                    value = 9;\n            }\n            return value\n        }\n        return ToNum(a)-ToNum(b)\n    })\n\n\n    if (reverse) {\n        list.reverse()\n        while (list[0].skill === \"?\") {\n            list.push(list.shift())\n        }\n    }\n\n    return list\n}\n\n\n\nfunction runningSort(list, reverse) {\n\n    let noData = []\n\tlet hasDam = []\n    let hasGauge = []\n\tlet hasGaugeAndDam = []\n    let knownState = []\n\n    list.forEach((item) => {\n        if (item.running !== undefined && !isNaN(item.running)) {knownState.push(item)}\n        //If there is gauge data, the user may be able to determine level themselves\n        //As such, put rivers with gauges second\n        else if (item.flow && item.dam) {hasGaugeAndDam.push(item)}\n        else if (item.flow) {hasGauge.push(item)}\n\t\telse if (item.dam) {hasDam.push(item)}\n        else {noData.push(item)}\n    })\n\n    knownState = simpleSort(knownState, \"running\")\n\n\t//Default order should be highest flow first.\n    if (!reverse) {\n        knownState.reverse()\n    }\n\n    if (window.usgsDataAge === undefined) {\n        alert(\"Sorting based on flow requires flow data, which has not yet loaded. The flow sort is not being performed.\")\n        return list\n    }\n\n    knownState = knownState.concat(hasGaugeAndDam)\n    knownState = knownState.concat(hasGauge)\n    knownState = knownState.concat(hasDam)\n    knownState = knownState.concat(noData)\n\n    return knownState\n}\n\n\n\n\n\nfunction sort(method, list, reverse) {\n    if (method === \"alphabetical\") {\n        list = alphabeticalsort(list, reverse)\n    }\n    else if (method === \"rating\") {\n        list = ratingsort(list, reverse)\n    }\n    else if (method === \"skill\") {\n        list = skillsort(list, reverse)\n    }\n    else if (method === \"running\") {\n        list = runningSort(list, reverse)\n    }\n    else {\n        throw \"Unknown sorting method \" + method\n    }\n    return list\n}\n\n\nmodule.exports = {\n    ratingsort,\n    alphabeticalsort,\n    skillsort,\n    sort\n}\n","'use strict';\n\n\ntry {\n\twindow.loadNewUSGS = \"Trying to Load Data\"\n\tif ('serviceWorker' in navigator) {\n\t\twindow.serviceWorkerMessages = []\n\t\tnavigator.serviceWorker.ready.then(function(registration) {\n\t\t\tnavigator.serviceWorker.onmessage = function(event) {\n\t\t\t\twindow.serviceWorkerMessages.push(event.data)\n\t\t\t\tlet data = event.data\n\n\t\t\t\tif (!data.includes(\"waterservices.usgs.gov\")) {return;}\n\n\t\t\t\twindow.oldLoadUSGS = window.loadNewUSGS\n\n\t\t\t\tif (data.includes(\"Updated cache for\")) {\n\t\t\t\t\tconsole.log(\"Updating\")\n\t\t\t\t\trequire(\"./loadUSGS.js\").loadUSGS() //Update the information\n\t\t\t\t}\n\t\t\t\telse if (data.includes(\"errored. Using cache\")) {\n\t\t\t\t\twindow.loadNewUSGS = \"Unable to load latest data\"\n\t\t\t\t}\n\t\t\t\telse if (data.includes(\" took too long to load from network\")) {\n\t\t\t\t\twindow.loadNewUSGS = \"Updating data in backgroud\"\n\t\t\t\t}\n\t\t\t\telse if (data.includes(\"has been loaded from the network\")) {\n\t\t\t\t\twindow.loadNewUSGS = \"This is likely a glitch. You should be viewing the latest data.\"\n\t\t\t\t}\n\t\t\t\twindow.updateOldDataWarning()\n\t\t\t}\n\t\t})\n\t}\n}\ncatch(e) {console.error(e)}\n\ntry {\n\twindow.addLine = require(\"./graph.js\").addLine\n}\ncatch(e) {console.error(e)}\n\n//Defines window.TopBar and window.triangle\nObject.assign(window, require(\"./TopBar.js\"))\n\nwindow.River = require(\"./River.js\").River\n\nwindow.sort = require(\"./sort.js\").sort\n\n//Defines window.normalSearch and window.advanedSearch\nObject.assign(window, require(\"./search.js\"))\n\nwindow.usgsarray = {}\n\n\n//ItemHolder is a list of all the DOM elements objects. New objects should be pushed into the list.\nwindow.ItemHolder = []\nriverarray.map(function(event, index) {\n\tItemHolder[index] = new River(index, event)\n})\n\n//Fetch data from USGS\n//ItemHolder has been filled, so this can be run here (and needs to be.... Otherwise window.usgsarray is undefined)\nrequire(\"./loadUSGS.js\").loadUSGS()\n\n\nvar oldresult;\nlet timesNewListCalled = 0 //Used to handle advanced search links with flow.\nwindow.NewList = function(query, type, reverse) {\n\ttimesNewListCalled++\n\tif (typeof(query) === \"string\") {\n\t\tquery = query.toLowerCase()\n\t}\n\t//Location searching uses numbers.\n\n\tlet orderedlist = ItemHolder.slice(0); //Clone the array\n\tif (!(String(query).length === 0 || !query || !type)) {\n\n\t\tif (type === \"sort\") {\n\t\t\t//Obey other filters\n\t\t\tif (oldresult) {\n\t\t\t\torderedlist = oldresult\n\t\t\t}\n\n\t\t\torderedlist = sort(query, orderedlist, reverse)\n\t\t}\n\t\tif (type === \"normal\") {\n\t\t\torderedlist = normalSearch(orderedlist, query)\n\t\t}\n\t\tif (type === \"advanced\") {\n\t\t\t//This is ineffecient because we run a search with every parameter, even when that parameter is useless (as the defaults are).\n\t\t\tquery = recursiveAssign({}, defaultAdvancedSearchParameters, query) //Use the default portions of the parameters in all non-specified cases.\n\t\t\torderedlist = advancedSearch(orderedlist, query)\n\t\t}\n\t\tif (type === \"location\") {\n\t\t\tif (oldresult) {\n\t\t\t\torderedlist = oldresult\n\t\t\t}\n\n\t\t\tvar nlist = []\n\t\t\torderedlist.forEach(function(value){\n\t\t\t\tif (value.plat && value.plon) {\n\t\t\t\t\tif (distanceto(value.plat, value.plon) < query) {\n\t\t\t\t\t\tnlist.push(value)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\torderedlist = nlist\n\t\t}\n\n\n\t}//Closing for if a query is present\n\telse if (type = \"normal\" && query.length === 0) {\n\t\torderedlist = normalSearch(orderedlist, query)\n\t}\n\n\t//Clear Current\n\tItemHolder.forEach(function(event) {\n\t\tevent.delete()\n\t})\n\t//Append New\n\tvar div = document.getElementById(\"Rivers\")\n\t//Everything else\n\torderedlist.forEach(function(event){\n\t\tdiv.appendChild(event.create())\n\t})\n\n\tif (type !== \"sort\") {\n\t\toldresult = orderedlist\n\t}\n}\n\n\ndocument.getElementById(\"Rivers\").appendChild(new TopBar().create())\n//Needs a #Rivers > .riverbutton to get font-size using getComputedStyle\nrequire(\"./createLegend.js\")\n\n\nNewList(\"alphabetical\", \"sort\")\n\n\nlet searchbox = document.getElementById(\"searchbox\")\nsearchbox.addEventListener(\"keyup\", function(event) {\n\t//If the user presses the \"Go\" button (Actually an Enter/Return), unfocus the searchbox.\n\tif (event.keyCode == 13) {\n        event.target.blur()\n    }\n\telse {\n\t\tNewList(searchbox.value, \"normal\")\n\t}\n})\n\n\n//Used to determine where search parameters match the default.\n//This is rather ineffecient, because it has to be called twice. A new system (probably using object.keys()) should be used instead.\n\tfunction _objectsEqual(obj1, obj2) {\n\t\t//Tells if all properties, recursively, match.\n\n\t\t//Avoid property of undefined issues.\n\t\tif (obj1 === undefined || obj2 === undefined) {\n\t\t\tif (obj1 !== obj2) {return false}\n\t\t\treturn true\n\t\t}\n\n\t\tfor (let property in obj1) {\n\t\t\tif (typeof obj1[property] === \"object\") {\n\t\t\t\tif (!objectsEqual(obj1[property], obj2[property])) {\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (obj1[property] !== obj2[property]) {\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn true\n\t}\n\n\tfunction objectsEqual(obj1, obj2) {\n\t\treturn _objectsEqual(obj1, obj2) && _objectsEqual(obj2, obj1)\n\t}\n\nfunction deleteMatchingPortions(obj1, obj2) {\n\t//Deletes all properties on obj1, recursively, that are identical to obj2\n\tif (!obj1 || !obj2) {\n\t\treturn obj1\n\t}\n\tfor (let property in obj1) {\n\t\t\tif (typeof obj1[property] === \"object\") {\n\t\t\t\tif (objectsEqual(obj1[property], obj2[property])) {\n\t\t\t\t\t//If the objects are equal, delete them.\n\t\t\t\t\tdelete obj1[property]\n\t\t\t\t}\n\t\t\t\t//With an array, positional data can be totally lost by this. Do not delete portions of arrays.\n\t\t\t\telse if (!(obj1[property] instanceof Array)) {\n\t\t\t\t\t//Delete the portions of the objects that match.\n\t\t\t\t\tdeleteMatchingPortions(obj1[property], obj2[property])\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (obj1[property] === obj2[property]) {\n\t\t\t\t\tdelete obj1[property]\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\treturn obj1\n}\n\nfunction recursiveAssign(target, ...objects) {\n\tif (objects.length > 1) {\n\t\tfor (let i=0;i<objects.length;i++) {\n\t\t\trecursiveAssign(target, objects[i])\n\t\t}\n\t}\n\telse {\n\t\tlet object = objects[0]\n\tconsole.log(Object.assign({}, target))\n\tconsole.log(Object.assign({}, object))\n\t\tfor (let property in object) {\n\t\t\tif (typeof object[property] === \"object\") {\n\t\t\t\tif (typeof target[property] !== \"object\") {\n\t\t\t\t\t//Fixing needed!!!\n\t\t\t\t\t//Right here we need to clone, recursively, object[property]\n\t\t\t\t\t//Object.assign() is only one level deep.\n\t\t\t\t\ttarget[property] = recursiveAssign({}, object[property])\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t//Setting target[property] to the result probably isn't needed.\n\t\t\t\t\ttarget[property] = recursiveAssign(target[property], object[property])\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttarget[property] = object[property]\n\t\t\t}\n\t\t}\n\t}\n\treturn target\n}\n\nlet defaultAdvancedSearchParameters;\ndefaultAdvancedSearchParameters = getAdvancedSearchParameters();\nconsole.log(defaultAdvancedSearchParameters)\n\n//Generate advanced search parameters from menu\nfunction getAdvancedSearchParameters() {\n\tlet parameters = {}\n\n\tparameters.name = {\n\t\ttype: document.getElementById(\"nameType\").value,\n\t\tquery: document.getElementById(\"nameQuery\").value\n\t}\n\n\tparameters.section  = {\n\t\ttype: document.getElementById(\"sectionType\").value,\n\t\tquery: document.getElementById(\"sectionQuery\").value\n\t}\n\n\tparameters.writeup = {\n\t\ttype: document.getElementById(\"writeupType\").value,\n\t\tquery: document.getElementById(\"writeupQuery\").value\n\t}\n\n\n\n\tlet distance = Number(document.getElementById(\"distanceQuery\").value)\n\n\tlet lat = document.getElementById(\"latitudeQuery\").value\n\tlet lon = document.getElementById(\"longitudeQuery\").value\n\n\t//TODO: Parse other latitude and longitude formats\n\tlat = Number(lat)\n\tlon = Number(lon)\n\n\n\n\tif (!(distance > 0) && lat && lon) {\n\t\talert(\"Distance must be a number greater than 0 to use location sorting\")\n\t}\n\telse if (distance > 0 && !(lat && lon)) {\n\t\talert(\"You must enter a latitude and longitude (Get the coordinates from GPS by pressing Calculate my Location)\")\n\t}\n\telse if (distance > 0 && lat && lon) {\n\t\tparameters.location = {\n\t\t\tlat,\n\t\t\tlon,\n\t\t\tdistance,\n\t\t\tincludeUnknown: document.getElementById(\"includeUnknownLocation\").checked\n\t\t}\n\t}\n\n\tparameters.tags = {\n\t\tquery: document.getElementById(\"tagsQuery\").value\n\t}\n\n\n\tparameters.skill = {\n\t\ttype: \"from\",\n\t\tquery: [\n\t\t\tNumber(document.getElementById(\"skillQuery1\").value),\n\t\t\tNumber(document.getElementById(\"skillQuery2\").value)\n\t\t]\n\t}\n\n\tparameters.flow = {\n\t\ttype: \"from\",\n\t\tquery: [\n\t\t\tNumber(document.getElementById(\"flowQuery1\").value),\n\t\t\tNumber(document.getElementById(\"flowQuery2\").value)\n\t\t],\n\t\tincludeDams: document.getElementById(\"includeDams\").checked,\n\t\tincludeUnknown: document.getElementById(\"includeUnknownFlow\").checked\n\t}\n\n\tparameters.sort = {\n\t\tquery: document.getElementById(\"sortQuery\").value,\n\t\treverse: document.getElementById(\"sortQueryReverse\").checked\n\t}\n\n\t//If a specific parameter matches the default, exclude.\n\t//Check for undefined, because this function is used to define defaultAdvancedSearchParameters\n\n\n\tif (defaultAdvancedSearchParameters !== undefined) {\n\t\tconsole.log(Object.assign({}, parameters))\n\t\tconsole.log(Object.assign({}, defaultAdvancedSearchParameters))\n\t\tparameters = deleteMatchingPortions(parameters, defaultAdvancedSearchParameters) //Delete where the default is used.\n\t}\n\n\n\treturn parameters\n}\n\n\n\nasync function calculateCoordinates() {\n\n\tlet status = document.getElementById(\"locationProgress\")\n\tlet num = 0\n\tlet progress = setInterval(function() {\n\t\tnum = (num+1)%6\n\t\tstatus.innerHTML = \"Calculating your Approximate Location (Expect this to take 15-60 seconds)\" + \".\".repeat(num)\n\t}, 500)\n\n\tlet position;\n\ttry {\n\t\tposition = await new Promise((resolve, reject) => {\n\t\t\tnavigator.geolocation.getCurrentPosition(resolve, reject)\n\t\t});\n\t}\n\tcatch(e) {\n\t\tlet output = \"Error code \" + e.code + \" occurred when getting your location. The error message is: \" + e.message\n\t\talert(output)\n\t\tclearInterval(progress)\n\t\tstatus.innerHTML = output\n\t}\n\n\n\tlet coords = position.coords\n\n\tclearInterval(progress)\n\n\tdocument.getElementById(\"latitudeQuery\").value = coords.latitude\n\tdocument.getElementById(\"longitudeQuery\").value = coords.longitude\n\tstatus.innerHTML = \"You are within \" + coords.accuracy + \" meters of \" + coords.latitude + \" degrees latitude and \" + coords.longitude + \" degrees longitude.\"\n}\n\ndocument.getElementById(\"calculateCoordinates\").addEventListener(\"click\", calculateCoordinates)\n\n\n\n\ndocument.getElementById(\"performadvancedsearch\").addEventListener(\"click\", function() {\n\tlet query = getAdvancedSearchParameters()\n\n\t//Add link to this search\n\t//This should run before NewList - otherwise some unwanted data (specifically, the content parameter added and used in some of the searches) is added to the object and URL\n\t//Find where rivers.run is located\n\t//This should allow rivers.run to the run from a directory\n\tlet root = window.location.href\n\troot = root.slice(0,root.lastIndexOf(\"/\") + 1) //Add 1 so we don't clip trailing slash\n\tlet link = encodeURI(root + \"#\" + JSON.stringify(query))\n\tdocument.getElementById(\"searchlink\").innerHTML = \"Link to this search: <a target=\\\"_blank\\\" href=\\\"\" + link + \"\\\">\" + link + \"</a>\"\n\n\tNewList(query, \"advanced\", false) //Reversing advanced search is handled in the sort.reverse portion of the parameters.\n})\n\n\n\n\n\n\n\n\n//Check if there is a search query\nif (window.location.hash.length > 0) {\n\tlet search = decodeURI(window.location.hash.slice(1))\n\nif (search.startsWith(\"{\")) {\n\t\t//Advanced search\n\t\tlet query = JSON.parse(search)\n\n\t\t//TODO: Set the advanced search areas to the query.\n\n\t\t//We have no usgs data yet. Wait to flow search/sort.\n\t\tif (window.usgsDataAge === undefined) {\n\t\t\tlet oldQuery = recursiveAssign({}, query)\n\t\t\tdelete query.flow\n\t\t\tif (query.sort && query.sort.query === \"running\") {\n\t\t\t\tdelete query.sort\n\t\t\t}\n\t\t\tfunction dataNowLoaded() {\n\t\t\t\tif (timesNewListCalled === 2 || confirm(\"You used an advanced search link with flow parameters. Now that flow data has loaded, would you like to apply that search?\")) {\n\t\t\t\t\tNewList(oldQuery, \"advanced\")\n\t\t\t\t}\n\t\t\t\twindow.removeEventListener(\"usgsDataUpdated\", dataNowLoaded)\n\t\t\t}\n\t\t\tif (!objectsEqual(query, oldQuery)) {\n\t\t\t\twindow.addEventListener(\"usgsDataUpdated\", dataNowLoaded)\n\t\t\t\tlet searchNotFinished = document.createElement(\"p\")\n\t\t\t\tsearchNotFinished.id = \"topOldDataWarning\" //Reuse styling\n\t\t\t\tsearchNotFinished.innerHTML = \"Portions of your advanced search link required flow data, which is still loading. You will be able to see the outcome of the whole search once flow data loads.\"\n\t\t\t\t//loadUSGS.js will delete searchNotFinished when it is not needed due to the id overlap.\n\t\t\t\tlet legend = document.getElementById(\"legend\")\n\t\t\t\tlegend.parentNode.insertBefore(searchNotFinished, legend)\n\t\t}\n\t}\n\tconsole.log(window.usgsDataAge)\n\n\n\t\tNewList(query, \"advanced\")\n\t}\n\telse {\n\t\t//Normal search\n\t\tdocument.getElementById(\"searchbox\").value = search\n\t\tNewList(search, \"normal\")\n\t}\n}\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","let sandbox = document.createElement(\"iframe\")\nsandbox.sandbox = \"allow-scripts\"\nsandbox.src = \"virtualGaugeCalculator.html\" //Consider inlining this in srcdoc\nsandbox.style.display = \"none\"\ndocument.body.appendChild(sandbox)\nwindow.sandbox = sandbox\n\n\n//TODO: Try to make sure that errors in the sandbox get reported. To keep the sandbox seperated from the internet, this probably requires an error message to be sent here,\n//then send out to the internet.\n\nfunction updateSandboxData() {\n\tsandbox.contentWindow.postMessage({type: \"usgsarray\", data: usgsarray}, '*');\n\treturn new Promise((resolve, reject) => {\n\t\tfunction resolveOnConfirmation(event) {\n\t\t\tif ((event.origin === \"null\" && event.source === sandbox.contentWindow)) {\n\t\t\t\tif (event.data.type === \"confirmation\" && event.data.result === \"usgsarray\") {\n\t\t\t\t\twindow.removeEventListener(\"message\", resolveOnConfirmation)\n\t\t\t\t\tresolve();\n\t\t\t\t}\n            }\n\t\t}\n\t\twindow.addEventListener(\"message\", resolveOnConfirmation)\n\t})\n}\n\nlet oldUSGSDataAge;\nlet updatePromise;\n\nasync function createVirtualGauge(river) {\n\tif (oldUSGSDataAge !== window.usgsDataAge) {\n\t\tif (!updatePromise) {updatePromise = updateSandboxData()}\n\t\tawait updatePromise\n\t\tupdatePromise = undefined\n\t}\n\t//TODO: Some virtual gauges may depend upon another virtual gauge. Use river.relatedusgs to tell which gauges are depended upon, and wait until those gauges finish.\n\n\t//TODO: Detect when two rivers use the same virtual gauge name, but the gauge has different values.\n\t//When this happens, log a warning and add an extension to later gauges.\n\n\t//The virtualGauge parameter is a stringified function.\n\t//That function will run with access to all the gauges that are specified in river.relatedusgs (to force related gauges to be put into river.relatedusgs).\n\t//It will return an object containing 00060 (cfs) and/or 00065 (feet)\n\n\t//Try to make sure an infinite loop in the virtual gauge code doesn't cause issues.\n\n\tsandbox.contentWindow.postMessage({type: \"calculation\", usgsSites: river.relatedusgs, gaugeID: river.usgs, function:river.virtualgauge}, new URL(sandbox.src).origin);\n\n\tawait new Promise((resolve, reject) => {\n\t\tfunction receiveResult(event) {\n\t\t\tif ((event.origin === \"null\" && event.source === sandbox.contentWindow)) {\n\t\t\t\tif (event.data.type === \"calculation\" && event.data.gaugeID === river.usgs) {\n\t\t\t\t\tusgsarray[river.usgs] = event.data.result\n\t\t\t\t\twindow.removeEventListener(\"message\", receiveResult)\n\t\t\t\t\tresolve();\n\t\t\t\t}\n            }\n\t\t}\n\t\twindow.addEventListener(\"message\", receiveResult)\n\t})\n}\n\nexport {\n\tcreateVirtualGauge\n}\n\n\nwindow.createVirtualGauge = createVirtualGauge\nconsole.log(createVirtualGauge)\n","//Graph Code\n//It's Ugly... It should be fixed\n//BUT IT WORKS\n\n//addline(canvas, horizontal, vertical, color, graphtype, numplace)\n\n//canvas - HTML canvas element\n//horizontal - array of horizontal values. Pass 0 and it will evenly space.\n//vertical - array of vertical values\n\n//color - Optional. Color of line. Default black\n//graphtype - Optional. Specify 2 to put 2 lines and 2 scales on one graph. See numplace below\n//numplace - Use only if you are using graphtype = 2. \n//If you specify 0 or do not pass a value, the line's scale will be on the left side of the graph.\n//If you specify 1, the line's scale will be on the right side of the graph\nfunction addLine(GraphName, timeframe, Source, canvas, horizontal, vertical, color, graphtype, numplace) {\n    if (graphtype === 3) {\n        var endcolor = numplace\n        }\n    if (graphtype !== 2) {\n        numplace = 0\n    }\n    var height = canvas.height*0.80\n    var width = canvas.width\n\n    var ctx = canvas.getContext('2d');  \n\n\n\n    if (!isNaN(Number(horizontal))) {\n        horizontal = []\n        for (var i = 0;i<vertical.length;i++) {\n            horizontal.push(i*width)\n        }\n    }\n    if (horizontal.length !== vertical.length) {\n        console.warn(\"Uneven amount of datapoints. \" + horizontal.length + \" horizontal points found, but \" + vertical.length + \" vertical points found.\")\n    }\n\n    color = color || \"#000000\"\n    \n    ctx.lineWidth = Math.ceil(Math.min(width, height)/120)\n    ctx.beginPath();\n\n    if (graphtype === 2) {\n        width = width*0.86\n    }\n    else {\n        width = width*0.93\n    }\n\n    var calcvertical = []\n    for (var i = 0;i<vertical.length;i++) {\n        if (!isNaN(Number(vertical[i])) && (vertical[i]) !== \"\") {\n            calcvertical.push(vertical[i])\n        }\n        //else {\n        //This is a valid warning - It just got TOO ANNOYING\n        //console.warn(\"Element \" + i + \" in list is an invalid number. It had a value of: \" + vertical[i])\n        //}\n    }\n\n    var vscale = Math.max(...calcvertical) - Math.min(...calcvertical)\n    var hscale = Math.max(...horizontal) - Math.min(...horizontal)\n    vscale = height/vscale\n    hscale = width/hscale\n    var voffset = Math.min(...calcvertical)\n    var hoffset = Math.min(...horizontal)\n\n    hoffset -= (Math.max(...horizontal) - Math.min(...horizontal))*0.07\n\n    var px = Math.floor(((canvas.width)*0.07)/2.6)\n    ctx.font = (px + 'px serif')\n    if (color.length === 9) {\n        color = color.slice(0,7)\n    }\n    ctx.fillStyle = color\n    ctx.strokeStyle = color\n\n    if (graphtype === 3) {\n        var grd = ctx.createLinearGradient(0, 0, 0, height);\n        grd.addColorStop(0, color);   \n        grd.addColorStop(1, endcolor);\n        ctx.strokeStyle = grd;\n        ctx.fillStyle = grd;\n    }    \n\n    if (numplace === 0 || numplace === undefined) {\n        var start = 1\n        }\n    else {\n        var start = canvas.width-(canvas.width*0.07)\n        }\n    for(var i = 1;i<11;i++) {\n        var Text = ((Math.max(...calcvertical) - Math.min(...calcvertical))*((i-1)/10))+Math.min(...calcvertical)\n\n        let precision = Math.max(0, 3-String(Math.round(Text)).length)\n\n        Text = Number(Text.toFixed(precision))\n\n        ctx.fillText(Text, start, (height*(11-i))/10-5);\n    }\n\n    //Top one\n    Text = ((Math.max(...calcvertical) - Math.min(...calcvertical))*((i-1)/10))+Math.min(...calcvertical)\n\n    let precision = Math.max(0, 3-String(Math.round(Text)).length)\n\n    Text = Number(Text.toFixed(precision))\n\n    ctx.fillText(Text, start, 27);\n\n\n\n\n\n    var px = Math.floor(((canvas.width)*0.07)/2.8)\n    ctx.font = (px + 'px serif')\n    if (color.length === 9) {\n        color = color.slice(0,7)\n    }\n\n\n    if (!window.darkMode) {\n        ctx.fillStyle = \"black\"\n    }\n    else {\n        //Dark Mode\n        ctx.fillStyle = \"#cccccc\"\n    }    \n\n\n\n    function formatDate(date) {\n        var time = String(date.getHours())\n\n        if (date.getHours() < 10) {\n            time = \"0\" + time\n        }\n        time += \":\"\n        if (date.getMinutes() < 10) {\n            time += \"0\" + date.getMinutes()\n        }\n        else {\n            time += date.getMinutes()\n        }\n        time += \" \" + (date.getMonth()+1) + \"/\" + date.getDate() + \"/\" +date.getFullYear()\n        return time\n    }\n\n    var time1 = new Date(timeframe[0])\n    var time2 = new Date(timeframe[timeframe.length - 1])\n    var time3 = new Date(((time2-time1)/2)+time1.getTime())\n\n    var starttime = formatDate(time1)\n    var endtime = formatDate(time2)\n    var midtime = formatDate(time3)\n\n    ctx.fillText(starttime, 10, (canvas.height*(11/12))-(canvas.height*0.06)-12)\n\n    ctx.textAlign = \"end\"; \n    ctx.fillText(endtime, canvas.width-10, (canvas.height*(11/12))-(canvas.height*0.06)-12)\n\n    ctx.textAlign = \"center\"; \n    ctx.fillText(midtime, canvas.width/2, (canvas.height*(11/12))-(canvas.height*0.06)-12)\n\n    ctx.textAlign = \"start\";     \n\n\n\n    var px = Math.floor(((canvas.width)*0.07)/2.4)\n    ctx.font = (px + 'px serif')\n    ctx.fillStyle = color\n    //We need to create a gradient for just the text \"Water Temperature (F)\"\n    if (graphtype === 3) {\n        var grd = ctx.createLinearGradient(0, height, 200, height);\n        grd.addColorStop(0, color);   \n        grd.addColorStop(1, endcolor);\n        ctx.strokeStyle = grd;\n        ctx.fillStyle = grd;\n    }\n\n    if (graphtype === 2) {\n        if (numplace === 0 || numplace === undefined) {\n            ctx.fillText(\"Flow (Cubic Feet/Second)\", start+5, (canvas.height*(11/12)));    \n        }\n        else {\n            ctx.textAlign = \"right\"; \n            ctx.fillText(\"Gauge Height (Feet)\", start-5, (canvas.height*(11/12)));\n            ctx.textAlign = \"start\"; \n        } \n    }\n    else if (graphtype === 3) {\n        ctx.fillText(\"Water Temperature (°F)\", start+5, (canvas.height*(11/12)));    \n    }\n    else {\n        if (GraphName === \"Precipitation\") {\n            ctx.fillText(\"Precipitation (Inches)\", start+5, (canvas.height*(11/12))); \n            var fulldayprecip = 0\n            var halfdayprecip = 0\n            var preciplist = vertical.slice(-96)\n            var preciplist = preciplist.map(Number)\n            //convert strings to numbers\n            preciplist.forEach(function(value){\n                fulldayprecip += value\n            })\n            preciplist = preciplist.slice(-48)\n            preciplist.forEach(function(value){\n                halfdayprecip += value\n            })\n\n            fulldayprecip = fulldayprecip.toFixed(2)\n            halfdayprecip = halfdayprecip.toFixed(2)\n\n            ctx.fillText(\"Last 24 Hours: \" + fulldayprecip + \" in\", canvas.width-700, (canvas.height*(11/12))); \n            ctx.fillText(\"Last 12 Hours: \" + halfdayprecip + \" in\", canvas.width-330, (canvas.height*(11/12))); \n        }\n        else if (GraphName === \"cfs\") {\n            ctx.fillText(\"Flow (Cubic Feet/Second)\", start+5, (canvas.height*(11/12)));    \n        }\n        else if (GraphName === \"height\") {\n            ctx.fillText(\"Gauge Height (Feet)\", start+5, (canvas.height*(11/12)));    \n        }\n        else {\n            ctx.fillText(\"Labeling Error...\", start+5, (canvas.height*(11/12)));    \n        }    \n    }\n\n    //set it back    \n    if (graphtype === 3) {\n        //The area that actually has the graph is the top 80% height wise\n        var grd = ctx.createLinearGradient(0, 0, 0, canvas.height*0.8);\n        grd.addColorStop(0, color);   \n        grd.addColorStop(1, endcolor);\n        ctx.strokeStyle = grd;\n        ctx.fillStyle = grd;\n    }\n\n    if (!window.darkMode) {\n        ctx.fillStyle = \"black\"\n    }\n    else {\n        //Dark Mode\n        ctx.fillStyle = \"#cccccc\"\n    }\n\n    ctx.textAlign = \"center\"; \n    ctx.fillText(Source, canvas.width/2 , canvas.height-10);  \n    ctx.textAlign = \"start\"; \n\n\n\n\n    function H(Value) {\n        return Math.round((Value-hoffset)*hscale)\n    }\n\n    function V(Value) {\n        return Math.round(height-((Value-voffset)*vscale))\n    }\n\n\n    for (var p = 0;p<Math.min(vertical.length, horizontal.length);p++) {\n        if (!isNaN(Number(vertical[p])) && vertical[p] !== \"\") {\n            ctx.moveTo(H(horizontal[p]), V(vertical[p]))\n            break;\n        }    \n    }\n\n\n    var valid = 1\n\n    for (var i = p;i<Math.min(vertical.length, horizontal.length);i++) {\n        if (!isNaN(Number(vertical[i])) && vertical[i] !== \"\") {\n            if (valid === 1) {\n                ctx.lineTo(H(horizontal[i]), V(vertical[i]))\n            }\n            else {\n                ctx.moveTo(H(horizontal[i]), V(vertical[i])+10)\n                ctx.lineTo(H(horizontal[i]), V(vertical[i]))\n                valid = 1\n            }\n        }\n        else {\n            valid = 0\n        }\n    }\n\n\n    ctx.stroke();\n    ctx.beginPath()\n\n    ctx.lineWidth = Math.ceil(ctx.lineWidth/10)\n\n    if (!window.darkMode) {\n        ctx.strokeStyle = \"000000AA\"\n    }\n    else {\n        //Dark Mode\n        ctx.strokeStyle = \"#ccccccAA\"\n    }\n\n    for (var i = 1;i<11;i++) {\n        ctx.moveTo(0, height*(11-i)/10)\n        ctx.lineTo(canvas.width, height*(11-i)/10)\n    }\n    ctx.stroke()\n}    \n\n\nexport {\n    addLine\n}\n","function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nmodule.exports = _nonIterableSpread;","function NewSpan(Text) {\n    let span = document.createElement(\"span\")\n    span.className = \"riverspan\"\n    span.innerHTML = Text\n    return span\n}\n\nfunction addSorting(span, type) {\n    span.onclick = function() {\n        if (this.value === 1) {\n            NewList(type, \"sort\", true) //Reversed\n            this.value = 0\n        }\n        else {\n            NewList(type, \"sort\")\n            this.value = 1\n        }\n    }\n}\n\n\nfunction TopBar() {\n    this.create = function() {\n        let button = document.createElement(\"button\")\n        button.id = \"topbar\"\n        button.className = \"riverbutton\"\n\n\n        let span = NewSpan(\"River⇅\")\n        addSorting(span, \"alphabetical\")\n        span.value = 1 //Starts sorted alphabetically, a-z. The first sort needs to reverse that.\n        button.appendChild(span)\n\n        button.appendChild(NewSpan(\"Section\"))\n\n        span = NewSpan(\"Skill⇅\")\n        addSorting(span, \"skill\")\n        span.value = 0\n        button.appendChild(span) \n\n\t\t\n\t\t//The rating span needs to be the same size as the stars. \n\t\tspan = NewSpan(\"\")\n\t\t//Create an invisible star span. This will make the spans width the same as the ratings.\n        let empty = document.createElement(\"span\")\n\t\tempty.className = \"emptyStars\"\n\t\tempty.innerHTML = \"☆☆☆☆☆\"\n\t\tempty.style.opacity = \"0\" //Invisible\n\t\t\n\t\t//Create the text span.\n\t\tlet realContent = document.createElement(\"span\")\n\t\trealContent.innerHTML = \"Rating⇅\"\n\t\t//Make sure that the span is positioned correctly.\n\t\trealContent.style.position = \"absolute\"\n\t\trealContent.style.left = 0\n\t\trealContent.style.bottom = 0\n\t\t\n\t\tspan.appendChild(empty)\n\t\tspan.appendChild(realContent)\n\t\t\n        addSorting(span, \"rating\")\n        span.value = 0 //We want greatest first, not least first, on the first sort\n        button.appendChild(span) \n\n\t\t\n\t\t\n        span = NewSpan(\"Flow/Trend⇅\")\n        addSorting(span, \"running\")\n        span.value = 0 //Show highest flow first, instead of lowest\n        button.appendChild(span)\n\n        return button\n    }\n\n    this.delete = function() {\n        let Node = document.getElementById(\"topbar\")\n        if (Node) {\n            Node.parentNode.removeChild(Node)\n        }\n    }\n}\n\n\nmodule.exports = {\n    TopBar\n}\n","\nlet addGraphs = require(\"./addGraphs.js\").addGraphs\nlet {calculateColor, calculateAge, calculateDirection} = require(\"./flowInfoCalculations.js\")\n\n\nfunction addHandlers(button, locate) {\n\tlet river = ItemHolder[locate]\n\n\t\t\t\twindow.addEventListener(\"colorSchemeChanged\", function() {\n\t\t\t\t\tbutton.style.backgroundColor = calculateColor(river)\n\t\t\t\t})\n\n\t\t\t\tbutton.addEventListener(\"mouseover\", function(){\n\t\t\t\t\tbutton.style.backgroundColor =  calculateColor(river, {highlighted: true})\n\t\t\t\t})\n\n\t\t\t\tbutton.addEventListener(\"mouseout\", function(){\n\t\t\t\t\tbutton.style.backgroundColor = calculateColor(river)\n\t\t\t\t})\n\n\t\t\tif (river.dam) {\n\t\t\t\twindow.addEventListener(\"colorSchemeChanged\", function() {\n\t\t\t\t\tbutton.style.backgroundColor = createStripes()\n\t\t\t\t})\n\t\t\t}\n\n    //Code that runs when the button is clicked\n    button.onclick = function () {\n        if (river.expanded === 0) {\n            river.expanded = 1\n            var div = document.createElement(\"div\")\n\n\t\t\tdiv.innerHTML = \"\"\n\n\t\t\tif (river.dam) {\n                //Adding to div.innerHTML works, but logs CSP errors\n                let link = document.createElement(\"a\")\n                link.target = \"_blank\"\n                link.rel = \"noopener\"\n                link.href = river.dam\n                link.innerHTML = \"This river has a dam. View information.\"\n                div.appendChild(link)\n\t\t\t\tdiv.appendChild(document.createElement(\"br\"))\n\t\t\t\tdiv.appendChild(document.createElement(\"br\"))\n            }\n\n\t\t\tdiv.innerHTML += river.writeup + \"<br><br>\"\n\n            if (river.plat && river.plon) {\n                div.innerHTML += \"Put-In GPS Coordinates: \" + river.plat + \", \" + river.plon + \"<br>\"\n            }\n\n            if (river.tlat && river.tlon) {\n                div.innerHTML += \"Take-Out GPS Coordinates: \" + river.tlat + \", \" + river.tlon + \"<br>\"\n            }\n\n\t\t\t//Show the user the values being used for determining relative flow.\n            let values = [\"minrun\", \"lowflow\", \"midflow\", \"highflow\", \"maxrun\"]\n\t\t\tlet flowRange = document.createElement(\"p\")\n\t\t\tflowRange.innerHTML = \"\"\n            for (let i=0;i<values.length;i++) {\n                let name = values[i]\n                if (river[name] && !isNaN(parseFloat(river[name]))) {\n                    flowRange.innerHTML += name + \":\" + river[name] + \" \"\n                }\n            }\n\t\t\tif (flowRange.innerHTML !== \"\") {div.appendChild(flowRange)}\n\n\n            if (river.aw) {\n                div.appendChild(document.createElement(\"br\"))\n                let link = document.createElement(\"a\")\n                link.target = \"_blank\"\n                link.rel = \"noopener\"\n                link.href = \"https://www.americanwhitewater.org/content/River/detail/id/\" + river.aw\n                link.innerHTML = \"View this river on American Whitewater\"\n                div.appendChild(link)\n            }\n\n\n            if (river.usgs) {\n                //Adding to div.innerHTML works, but logs CSP errors\n                div.appendChild(document.createElement(\"br\"))\n                let link = document.createElement(\"a\")\n                link.target = \"_blank\"\n                link.rel = \"noopener\"\n                link.href = \"https://waterdata.usgs.gov/nwis/uv?site_no=\" + river.usgs\n                link.innerHTML = \"View flow information on USGS\"\n                div.appendChild(link)\n            }\n\n\n\t\t\tlet addedUSGSDisclaimer = false\n\t\t\tlet addedVirtualGaugeDisclaimer = false\n\n\t\t\t//Auxillary function\n\t\t\t//TODO: Show button to see code used by virtual gauge.\n\t\t\tfunction addUSGSGraphs(usgsID, relatedGauge) {\n\n\t\t\t\t//Alert the user if the data is (at least 2 hours) old\n\t\t\t\tlet dataAge\n                try {\n                    dataAge = calculateAge(usgsID)\n                }\n                catch(e) {\n                    console.error(e)\n                    dataAge = null\n                }\n                let maxAge = 1000*60*60*2\n                let oldDataWarning;\n\t\t\t\tif (dataAge > maxAge) {\n\t\t\t\t\toldDataWarning = document.createElement(\"p\")\n\t\t\t\t\toldDataWarning.innerHTML = \"Check the dates! This river data is more than \" + Math.floor(dataAge/1000/60/60) + \" hours old!\"\n\n\t\t\t\t\toldDataWarning.className = \"oldDataWarning\"\n\t\t\t\t\tdiv.appendChild(oldDataWarning)\n\t\t\t\t}\n\n                let data = self.usgsarray[usgsID]\n                if (data) {\n\n\t\t\t\t\tfunction addDisclaimer(text) {\n\t\t\t\t\t\tlet disclaimer = document.createElement(\"p\")\n\t                    disclaimer.style.fontWeight = \"bold\"\n\t                    disclaimer.style.textAlign = \"center\"\n\t                    disclaimer.innerHTML = text\n\t                    return div.appendChild(disclaimer)\n\t\t\t\t\t}\n\n\t\t\t\t\tlet isVirtualGauge = usgsID.startsWith(\"virtual:\")\n\n\t\t\t\t\t//Add the disclaimer about USGS Gauges.\n\t\t\t\t\tif (!addedUSGSDisclaimer && !isVirtualGauge) {\n\t\t\t\t\t\tlet disclaimer = addDisclaimer(\"Disclaimer: USGS Gauge data is provisional, and MIGHT be incorrect. Use at your own risk.\")\n\t\t\t\t\t\tif (!oldDataWarning) {\n\t                        disclaimer.style.marginTop = \"2em\" //Space the disclaimer from the content above\n\t                    }\n\t                    else {\n\t                        disclaimer.style.marginTop = \"0.5em\" //Make the disclaimer closer to the warning\n\t                        oldDataWarning.style.marginBottom = \"0.5em\"\n\t                    }\n\t\t\t\t\t\taddedUSGSDisclaimer = true\n\t\t\t\t\t}\n\n\t\t\t\t\t//Add the disclaimer about virtual gauges.\n\t\t\t\t\tif (!addedVirtualGaugeDisclaimer && isVirtualGauge) {\n\t\t\t\t\t\tlet disclaimer = addDisclaimer(\"Disclaimer: Virtual gauges are community provided, based off provisional data, and condition dependent. Use at your own risk.\")\n\t\t\t\t\t\tif (!oldDataWarning) {\n\t                        disclaimer.style.marginTop = \"2em\" //Space the disclaimer from the content above\n\t                    }\n\t                    else {\n\t                        disclaimer.style.marginTop = \"0.5em\" //Make the disclaimer closer to the warning\n\t                        oldDataWarning.style.marginBottom = \"0.5em\"\n\t                    }\n\t\t\t\t\t\taddedUSGSDisclaimer = true\n\t\t\t\t\t}\n\n\t\t\t\t\tif (relatedGauge) {\n\t\t\t\t\t\tdiv.appendChild(document.createElement(\"br\"))\n\t\t\t\t\t\tdiv.appendChild(document.createElement(\"br\"))\n\t\t\t\t\t\t//Not really a disclaimer, but the styling works well.\n\t\t\t\t\t\taddDisclaimer(\"<br><br>The gauge below is related to this river, but is not the primary gauge for it\")\n\t\t\t\t\t}\n\t\t\t\t\tconsole.time(\"Add Graphs\")\n                    addGraphs(div, data)\n\t\t\t\t\tconsole.timeEnd(\"Add Graphs\")\n                }\n\t\t\t}\n\n            //USGS data may not have loaded yet\n\t\t\tif (self.usgsarray) {\n\t\t\t\triver.usgs && addUSGSGraphs(river.usgs)\n\t\t\t\tif (river.relatedusgs) {\n\t\t\t\t\tfor (let i=0;i<river.relatedusgs.length;i++) {\n\t\t\t\t\t\taddUSGSGraphs(river.relatedusgs[i], true)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\n            div.style.padding = \"6px\"\n            div.id = river.base + 2\n            button.parentNode.insertBefore(div, button.nextSibling)\n        }\n        else {\n            river.expanded = 0\n            var elem = document.getElementById(river.base + 2)\n            if (elem) {\n                elem.parentNode.removeChild(elem)\n            }\n\n        }\n    }\n\n\n\n\n\n}\n\n\nfunction createStripes(newColor = window.darkMode ? \"rgba(256,256,256,0.2)\":\"rgba(170,170,170,0.33)\", oldColor = \"rgba(0,0,0,0)\") {\n\t\t//If the river has a dam, stripe it.\n\n\t\tlet background = \"linear-gradient(150deg\"\n\n\t\tfor (let i=0;i<19;i++) {\n\t\t\tbackground += \", \"\n\t\t\tbackground += i % 3 ? oldColor:newColor\n\t\t}\n\n        background += \")\"\n\n\t\treturn background\n}\n\n\n\n\nmodule.exports.River = function(locate, event) {\n\n    //Copies name, section, skill, rating, writeup, tags, usgs, plat,plon, tlat,tlon, aw, dam\n    Object.assign(this, event)\n    //tags needs to be a string. It can't be undefined\n    this.tags = this.tags || \"\"\n    //Convert the numeric value to the filename\n\n\tthis.rating = parseFloat(this.rating)\n\t//Consider allowing ratings less than 1.\n    if (this.rating < 1 || this.rating > 5 || isNaN(this.rating) || this.rating === undefined) {\n        this.rating = \"Error\"\n    }\n\n    this.skill = this.skill || \"?\"\n\n    this.base = \"b\" + locate\n    this.expanded = 0\n    this.index = locate\n\n\n    this.create = function (forceregenerate) {\n        //Only create the button once - It's about 3 times faster.\n        if (!this.finished || forceregenerate) {\n\n            var button = document.createElement(\"button\")\n            button.id = this.base + 1\n\n            function AddSpan(text) {\n                let span = document.createElement(\"span\")\n                span.innerHTML = text\n                span.className = \"riverspan\"\n                button.appendChild(span)\n                return span\n            }\n\n            AddSpan(this.name)\n            AddSpan(this.section)\n\n\t\t\tlet translations = {\n\t\t\t\t\"?\": \"Skill Unknown\",\n\t\t\t\t\"FW\": \"Flat Water\",\n\t\t\t\t\"B\": \"Beginner\",\n\t\t\t\t\"N\": \"Novice\",\n\t\t\t\t\"LI\": \"Low Intermediate\",\n\t\t\t\t\"I\": \"Intermediate\",\n\t\t\t\t\"HI\": \"High Intermediate\",\n\t\t\t\t\"A\": \"Advanced\",\n\t\t\t\t\"E\": \"Expert\"\n\t\t\t}\n\t\t\t//Add a setting for the tooltips.\n\t\t\tif (localStorage.getItem(\"skillTooltips\") === \"false\") {\n\t\t\t\tAddSpan(this.skill)\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlet skillSpan = document.createElement(\"span\")\n\t\t\t\tskillSpan.className = \"riverspan tooltip\"\n\n\t\t\t\tlet tooltip = document.createElement(\"div\")\n\t\t\t\ttooltip.innerHTML = this.skill\n\t\t\t\ttooltip.className = \"tooltip\"\n\n\t\t\t\tlet tooltiptext = document.createElement(\"span\")\n\t\t\t\ttooltiptext.innerHTML = translations[this.skill]\n\t\t\t\ttooltiptext.className = \"tooltiptext\"\n\n\t\t\t\tskillSpan.style.borderBottom = \"none\"\n\n\t\t\t\ttooltip.appendChild(tooltiptext)\n\t\t\t\tskillSpan.appendChild(tooltip)\n\t\t\t\tbutton.appendChild(skillSpan)\n\t\t\t}\n\n            //Star images for rating\n            if (this.rating === \"Error\") {\n\t\t\t\t//Make sure that the span is the correct width, but inivisble.\n                let span = AddSpan(\"☆☆☆☆☆\")\n\t\t\t\tspan.style.opacity = \"0.2\"\n\t\t\t\tspan.classList.add(\"emptyStars\")\n            }\n            else {\n\t\t\t\tlet span = document.createElement(\"span\")\n                span.className = \"riverspan\"\n\n\t\t\t\t//We will use one empty span to set the width of the containing span.\n\t\t\t\t//We will use another empty span to overlay the full stars\n                let spacer = document.createElement(\"span\")\n\t\t\t\tspacer.className = \"emptyStars\"\n\t\t\t\tspacer.innerHTML = \"☆☆☆☆☆\"\n\t\t\t\tspacer.style.opacity = \"0\"\n                span.appendChild(spacer)\n\n                let empty = document.createElement(\"span\")\n\t\t\t\tempty.className = \"emptyStars\"\n\t\t\t\tempty.innerHTML = \"☆☆☆☆☆\"\n\t\t\t\tempty.style.position = \"absolute\"\n\t\t\t\tempty.style.zIndex = \"1\" //Overlay the full stars\n                span.appendChild(empty)\n\n\t\t\t\tlet full = document.createElement(\"span\")\n\t\t\t\tfull.className = \"fullStars\"\n\t\t\t\tfull.innerHTML = \"★★★★★\"\n\t\t\t\tfull.style.width = this.rating*20 + \"%\"\n                span.appendChild(full)\n\n                button.appendChild(span)\n            }\n\n\t\t\t//Load this.flow from usgsarray.\n\t\t\tlet data = usgsarray[this.usgs]\n\t\t\tif (data) {\n\t            let cfs = data[\"00060\"]\n\t            let feet = data[\"00065\"]\n\n\t            //Prevent \"TypeError: Can't Read Property 'values' of undefined\"\n\t            if (cfs) {cfs = cfs.values}\n\t            if (feet) {feet = feet.values}\n\n\n\t            let latestCfs, latestFeet;\n\t            if (cfs) {\n\t                latestCfs = cfs[cfs.length - 1].value\n\t            }\n\t            if (feet) {\n\t                latestFeet = feet[feet.length - 1].value\n\t            }\n\n\t            this.feet = latestFeet\n\t            this.cfs = latestCfs\n\n\t            if (latestCfs && latestFeet) {\n\t                this.flow = latestCfs + \"cfs \" + latestFeet + \"ft\"\n\t            }\n\t            else if (latestCfs) {\n\t                this.flow = cfs[cfs.length - 1].value + \" cfs\"\n\t            }\n\t            else if (latestFeet) {\n\t                this.flow = feet[feet.length - 1].value + \" ft\"\n\t            }\n\t\t\t}\n\n            if (this.flow) {\n                let flowSpan = AddSpan(this.flow + calculateDirection(this.usgs) + (this.dam ? \"Dam\" : \"\"))\n            }\n\t\t\telse if (this.dam) {AddSpan(\"Dam\")}\n\n\n            button.className = \"riverbutton\"\n            //Add the click handler\n            addHandlers(button, locate)\n\n            //Store button for reuse later\n            this.finished = button\n\n        }\n\n\t\tthis.updateExpansion = function() {\n\t\t\t//Do not use \"this\". If called from event listener on window it will fail.\n\t\t\tlet river = ItemHolder[locate]\n\t\t\t//Make sure it is expanded. Otherwise, there is no need to update the expansion - and\n\t\t\t//updating the expansion can take a lot of time, expecially if it causes reflow.\n\t\t\tif (river.expanded) {\n\t\t\t\triver.finished.onclick()\n\t\t\t\triver.finished.onclick()\n\t\t\t}\n\t\t}\n\n\t\twindow.addEventListener(\"colorSchemeChanged\", this.updateExpansion)\n\n\t\tif (this.dam) {\n\t\t\tthis.finished.style.background = createStripes()\n\t\t}\n\t\tif (calculateColor(this)) {\n\t\t\tthis.finished.style.backgroundColor = calculateColor(this)\n\t\t}\n\t\telse if (this.dam) {\n\t\t\t//Background color gets overwrote by background. This class uses !important to prevent that.\n\t\t\tthis.finished.classList.add(\"riverbuttonDam\")\n\t\t}\n\n        //Return finished button\n        return this.finished\n\n    }\n\n\n    this.delete = function () {\n        let river = ItemHolder[locate]\n        function Remove(Code) {\n            let ToDelete = document.getElementById(river.base + Code)\n            if (ToDelete) {\n                ToDelete.parentNode.removeChild(ToDelete)\n            }\n        }\n\n        //Reset background color\n        let reset = document.getElementById(river.base + 1)\n        if (reset) {\n            reset.style.backgroundColor = \"\"\n        }\n\n        Remove(2)\n        Remove(1)\n\n    }\n}\n","\n//Auxillary Function\n//Creates the canvas used by each of the graphs\nfunction createcanvas() {\n    let canvas = document.createElement(\"canvas\")\n    canvas.width = 1200\n    canvas.height = 800\n\n    //Make sure the background is not transparent\n    let ctx = canvas.getContext(\"2d\");\n    if (!window.darkMode) {\n        ctx.fillStyle = \"white\";\n    }\n    else {\n        //Dark Mode\n        ctx.fillStyle = \"black\"\n    }\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n    return canvas\n}\n\n\n//Auxillary Function\nfunction toparts(arr) {\n    let values = []\n    let timestamps = []\n\n    for (let i=0;i<arr.length;i++) {\n        let obj = arr[i]\n        values.push(obj.value)\n        timestamps.push(obj.dateTime)\n    }\n\n    return {values:values,timestamps:timestamps}\n}\n\n\nfunction addCanvasAsImage(appendTo, canvas) {\n    //For some reason, only the last canvas was showing. Use images.\n\t//I tried using blob urls instead of dataurls to improve performance, but they didn't help, and actually made things WORSE!!!\n    //Images also allow \"Save Image As\"\n    let img = document.createElement(\"img\")\n    img.className = \"graph\"\n\t\n\timg.src = canvas.toDataURL(\"image/png\")\n\n    appendTo.appendChild(img)\n}\n\nfunction addFlowGraph(div, cfs, height, data) {\n    //Make sure we actually have some data, and don't create an empty graph\n    if (!(cfs || height)) {return}\n\n    let canvas = createcanvas()\n    //Time to create a dual lined graph!\n    if (cfs && height) {\n        let parts = toparts(cfs.values)\n        addLine(\"cfs\", parts.timestamps, data.name, canvas, 0, parts.values, \"#00AAFFa0\", 2)\n        parts = toparts(height.values)\n        addLine(\"height\", parts.timestamps, data.name, canvas, 0, parts.values,  window.darkMode?\"#3232FFa0\":\"#0000FFa0\", 2, 1)\n    }\n    //We won't have both cfs and height. Draw a single line graph for whichever we have.\n    else if (cfs) {\n        let parts = toparts(cfs.values)\n        addLine(\"cfs\", parts.timestamps, data.name, canvas, 0, parts.values, \"#00AAFF\")\n    }\n    else {\n        let parts = toparts(height.values)\n        addLine(\"height\", parts.timestamps, data.name, canvas, 0, parts.values,  window.darkMode?\"#3232FF\":\"#0000FF\")\n    }\n\n\treturn addCanvasAsImage(div, canvas)\n}\n\n\nfunction addTempGraph(div, temp, data) {\n    if (temp) {\n        let canvas = createcanvas()\n\n        let parts = toparts(temp.values)\n        addLine(\"\", parts.timestamps, data.name, canvas, 0, parts.values, \"#FF0000\", 3, window.darkMode?\"#3232FF\":\"#0000FF\")\n\n \t\treturn addCanvasAsImage(div, canvas)\n\n    }\n}\n\n\n\nfunction addPrecipGraph(div, precip, data) {\n    if (precip) {\n        let canvas = createcanvas()\n\n        let parts = toparts(precip.values)\n        addLine(\"Precipitation\", parts.timestamps, data.name, canvas, 0, parts.values, \"#0066FF\")\n\n\t\treturn addCanvasAsImage(div, canvas)\n    }\n}\n\n\nmodule.exports.addGraphs = function(div, data) {\n\n    //The graphing is wrapped in a try-catch statement because USGS often supplies invalid data\n    //for a specific river due to gauge problems.\n    //Each canvas is wrapped individually because sometimes only some graphs have invalid data\n\n    let temp = data[\"00010\"]\n    let precip = data[\"00045\"]\n    let cfs = data[\"00060\"]\n    let height = data[\"00065\"]\n\n\n\n    try {\n        addFlowGraph(div, cfs, height, data)\n    }\n    catch(e){console.warn(\"Error creating flow graph: \" + e)}\n\n    try {\n        addTempGraph(div, temp, data)\n    }\n    catch(e){console.warn(\"Error creating temperature graph: \" + e)}\n\n    try {\n        addPrecipGraph(div, precip, data)\n    }\n    catch(e){console.warn(\"Error creating precipitation graph: \" + e)}\n}\n","//These functions are used by River.js to calculate things based on a rivers flow.\n\nfunction calculateDirection(usgsNumber) {\n    let usgsData = usgsarray[usgsNumber]\n    if (usgsData) {\n        let data;\n\n        if (usgsData[\"00060\"]) {data = usgsData[\"00060\"].values}\n        else if (usgsData[\"00065\"]) {data = usgsData[\"00065\"].values}\n\n        if (data) {\n            let current;\n            let previous;\n\n            //We will go back 4 datapoints (1 hour) if possible.\n            //Do this because USGS sometimes does 1 hour intervals instead of 15 minutes\n            let stop = Math.max(data.length-5, 0)\n            for (let i=data.length;i>stop;i--) {\n                let item = data[i]\n                if (!item) {continue}\n                let value = item.value\n                if (!current) {\n                    current = value\n                }\n                else {\n                    previous = value\n                }\n            }\n\n            if (current > previous) {\n                //Water level rising\n                return \"⬆\"\n            }\n            else if (previous > current) {\n                //Water level falling\n                return \"⬇\"\n            }\n            else if (current === previous) {\n                //Water level stable\n                return \"-\"\n            }\n\n        }\n    }\n    return; //If we got here, there is not enough USGS data.\n}\n\n\n\nfunction calculateAge(usgsNumber) {\n\t//Returns millseconds old that USGS data is\n    let usgsData = window.usgsarray[usgsNumber]\n    if (usgsData) {\n        let data;\n\n        if (usgsData[\"00060\"]) {data = usgsData[\"00060\"].values}\n        else if (usgsData[\"00065\"]) {data = usgsData[\"00065\"].values}\n        else if (usgsData[\"00010\"]) {data = usgsData[\"00010\"].values}\n        else if (usgsData[\"00045\"]) {data = usgsData[\"00045\"].values}\n\n        if (data) {\n            for (let i=data.length;i>=0;i--) {\n                let item = data[i]\n                if (!item) {continue}\n                return Date.now() - Number(new Date(item.dateTime))\n            }\n        }\n    }\n    return null; //If we got here, there is not enough USGS data.\n}\n\n\n\nfunction calculateColor(river, options) {\n    //hsla color values\n    //hsla(hue, saturation, lightness, opacity)\n    //Saturation hue is 0 red 120 green 240 blue\n    //Saturation - use 100%\n    //Lightness - use 50%\n    //Opacity - Decimal 0 to 1\n\n\n    //Defines river.running\n    //0-4\n    //0 is too low, 4 is too high, other values in between\n\n\n    let values = [\"minrun\", \"lowflow\", \"midflow\", \"highflow\", \"maxrun\"]\n\n    let type; //Currently, we skip a value if one datapoint is cfs and another feet\n\n    for (let i=0;i<values.length;i++) {\n\n        let str = river[values[i]]\n        if (!str) {\n            values[i] = undefined\n            continue;\n        }\n\t\tstr = str.split(\"(computer)\").join(\"\")\n        str = str.trim()\n        let value = parseFloat(str)\n        let currentType = str.match(/[^\\d|.]+/) //Match a series of non-digits\n\n        if (currentType) {\n            currentType = currentType[0].trim().toLowerCase() //Use the first match\n        }\n        if (!type && currentType) {\n            type = currentType\n        }\n        else if (type !== currentType && !isNaN(value)) {\n            console.warn(values[i] + \" on \" + river.name + \" \" + river.section + \" has a different extension and has been skipped\")\n            values[i] = undefined\n            continue;\n        }\n\n        values[i] = value\n    }\n\n    let flow;\n    if (type === \"cfs\") {\n        flow = river.cfs\n    }\n    else if (type === \"feet\" || type===\"ft\") {\n        flow = river.feet\n    }\n\n\n    //Use or equal to\n    //While that technically may not be correct (says that river is too low at minrun), it makes no significant difference\n    //In addition, values equal to minrun or maxrun result in a river.running of 0 or 4\n    //Meaning that they may be included in the middle of a darker highlighted rivers\n    //When sorting by runnability is used.\n\n    //It would be better if rivers that are too high or too low are still given river.running values\n    //related to their level. This would also help in determining if something is just barely\n    //too low, and may come up with rain, or is truely too low.\n\n\n\t//If we don't have some values, fill them in using logarithms\n\t//Although these calculations are not needed when flow is below minrun or above maxrun. they can be useful in\n\t//alerting people what values are being used, so that they can\n\tlet minrun = values[0]\n\tlet maxrun = values[4]\n\t//Prefer midflow, log-avg lowflow highflow, log-avg minrun maxrun.\n\tlet midflow = values[2] || 10**((Math.log10(values[1]) + Math.log10(values[3]))/2) || 10**((Math.log10(minrun) + Math.log10(maxrun))/2)\n\tlet lowflow = values[1] || 10**((Math.log10(minrun) + Math.log10(midflow))/2)\n\tlet highflow = values[3] || 10**((Math.log10(midflow) + Math.log10(maxrun))/2)\n\n\t//Add computer generated properties to the river object so that they will display and people can see the values used in calculations.\n\tvalues[1] || (river.lowflow = parseFloat(lowflow.toFixed(2)) + type + \" (computer)\")\n\tvalues[2] || (river.midflow = parseFloat(midflow.toFixed(2)) + type + \" (computer)\")\n\tvalues[3] || (river.highflow = parseFloat(highflow.toFixed(2)) + type + \" (computer)\")\n\n\n    if (flow <= minrun) {\n        //Too low\n        river.running = 0\n\t    let lightness = (options && options.highlighted)? (window.darkMode? \"28%\": \"63%\"):  window.darkMode? \"23%\": \"67%\"\n        return \"hsl(0,100%,\" + lightness + \")\"\n    }\n    else if (flow >= maxrun) {\n        //Too high\n        river.running = 4\n    \tlet lightness = (options && options.highlighted)? (window.darkMode? \"30%\": \"67%\"):  window.darkMode? \"20%\": \"69%\"\n        return \"hsl(240,100%,\" + lightness + \")\"\n    }\n    else {\n\n\t\t//Normal Flow lightness values\n\t\t//Tough to see a difference when highlighted amount the more middle values in light mode.\n    \tlet lightness = (options && options.highlighted)? (window.darkMode? \"30%\": \"65%\"): window.darkMode? \"25%\": \"70%\"\n\n        function calculateRatio(low, high, current) {\n            low = Math.log(low)\n            high = Math.log(high)\n\n            current = Math.log(current)\n\n\n            let range = high-low\n            let value = current-low\n\n            return value/range\n\n        }\n\n        if (flow < lowflow && minrun) {\n            river.running = calculateRatio(minrun, lowflow, flow)\n        }\n        else if (flow < midflow && lowflow) {\n            river.running = 1+calculateRatio(lowflow, midflow, flow)\n        }\n        else if (flow < highflow && midflow) {\n            river.running = 2+calculateRatio(midflow, highflow, flow)\n        }\n\t\t//Use else if and comparison against maxrun to go to the else in case of isNaN(maxrun)\n        else if (flow < maxrun && highflow) {\n            river.running = 3+calculateRatio(highflow, maxrun, flow)\n        }\n\t\telse {\n\t\t\treturn \"\" //We can't calculate a color or ratio. We lack enough information. Example: only have minrun and flow above minrun.\n\t\t}\n\n        return \"hsl(\" + (0 + 60*river.running) + \",100%,\" + lightness + \")\"\n    }\n}\n\nexport {\n\tcalculateColor,\n\tcalculateAge,\n\tcalculateDirection\n}","let sortUtils = require(\"./sort.js\")\n\nfunction normalSearch(list, query) {\n    let l = [[],[],[],[],[]]\n    list.forEach(function(event){\n        if(event.tags.toLowerCase().indexOf(query) !== -1) {\n            if (event.name.toLowerCase().indexOf(query) !== -1) {\n                l[0].push(event)\n            }\n            else {\n                l[1].push(event)\n            }\n        }\n        else if (event.name.toLowerCase().indexOf(query) !== -1) {\n            if (event.name.toLowerCase().startsWith(query)) {\n                l[0].push(event)\n            }\n            else {\n                l[2].push(event)\n            }\n        }\n        else if (event.section.toLowerCase().indexOf(query) !== -1) {\n            l[3].push(event)\n        }\n        else if (event.writeup.toLowerCase().indexOf(query) !== -1) {\n            l[4].push(event)\n        }\n    })\n\n\tconsole.log(l)\n\n\t//Sort each match level alphabetically by river name\n\n\tfunction compareNames(river1, river2) {\n\t\tif (river1.name > river2.name) {\n\t\t\treturn 1\n\t\t}\n\t\tif (river1.name < river2.name) {\n\t\t\treturn -1\n\t\t}\n\t\treturn 0\n\t}\n\n\tl[0] = l[0].sort(compareNames)\n\tl[1] = l[1].sort(compareNames)\n\tl[2] = l[2].sort(compareNames)\n\tl[3] = l[3].sort(compareNames)\n\tl[4] = l[4].sort(compareNames)\n\n\tconsole.log(l)\n\n\t//Less relevant results are lower.\n    list = l[0].concat(l[1],l[2],l[3],l[4])\n\n    return list\n}\n\n\n\n\n\n\n\n\n\n\n\nfunction stringQuery(parameters) {\n\n    let content = parameters.content\n    let query = parameters.query\n\n    //Ignore case by default\n    if (!parameters.matchCase) {\n        content = content.toLowerCase()\n        query = query.toLowerCase()\n    }\n\n    if (parameters.type === \"contains\") {\n        return content.includes(query)\n    }\n    else if (parameters.type === \"matches\") {\n        return content === query\n    }\n    else {\n        throw \"Unknown Search Type \" + parameters.type\n    }\n}\n\n\nfunction stringFilter(list, property, parameters) {\n    //Filter out the elements that fail the test\n    //Since we may be deleting elements in the list, items will be skipped if we use array.length\n    for (let item in list) {\n        parameters.content = list[item][property]\n        let passes = stringQuery(parameters)\n        if (!passes) {\n            //Remove the item if it fails\n            delete list[item]\n        }\n    }\n    return list\n}\n\n\n\nfunction skillToNumber(skill) {\n    let value\n    switch (skill) {\n        case \"FW\":\n            value = 1;\n            break;\n        case \"B\":\n            value = 2;\n            break;\n        case \"N\":\n            value = 3;\n            break;\n        case \"LI\":\n            value = 4;\n            break;\n        case \"I\":\n            value = 5;\n            break;\n        case \"HI\":\n            value = 6;\n            break;\n        case \"A\":\n            value = 7;\n            break;\n        case \"E\":\n            value = 8;\n    }\n    return value\n}\n\n\n\n\n\n\nfunction skillFilter(list, parameters) {\n\n    let query = parameters.query\n    let type = parameters.type\n\n    let min = Math.min(query[0], query[1])\n    let max = Math.max(query[0], query[1])\n\n    if (type !== \"from\") {throw \"Unknown search type\" + type}\n\n    for (let item in list) {\n\n        let passes = false;\n        let skill = skillToNumber(list[item].skill)\n\n        if (min <= skill && skill <= max) {\n            passes = true\n        }\n\n        if (!passes) {\n            //Remove the item if it fails\n            delete list[item]\n        }\n    }\n\n\treturn list\n}\n\n\n\n\n\n\n\n\n\n\nfunction ratingFilter(list, parameters) {\n\tconsole.error(\"Rating based filtering is not yet implemented\")\n\treturn list\n}\n\n\n\n\nlet calculateDistance = require(\"./distance.js\").lambert //Lambert formula\n\nfunction locationFilter(list, parameters) {\n\n    let maxDistance = parameters.distance\n    let lat1 = parameters.lat\n    let lon1 = parameters.lon\n\n    //Filter out the elements that fail the test\n    //Since we may be deleting elements in the list, items will be skipped if we use array.length\n    for (let item in list) {\n        let river = list[item]\n\n        let lat2 = river.plat || river.tlat || river.hidlat\n        let lon2 = river.plon || river.tlon || river.hidlon\n\n        let passes;\n        if (lat2 && lon2) {\n            let distance = calculateDistance(lat1, lon1, lat2, lon2)\n\n            passes = distance < maxDistance\n        }\n        else {\n            //If we have one of two coordinates, we may still be able to eliminate the river by calculating distance on one axis and\n\t\t\t//eliminating the river if the calculated distance is greater than maxDistance\n\t\t\tlet distance;\n\t\t\tif (lat2) {\n            \tdistance = calculateDistance(lat1, lon1, lat2, lon1)\n\t\t\t}\n\t\t\telse if (lon2) {\n\t\t\t    distance = calculateDistance(lat1, lon1, lat1, lon2)\n\t\t\t}\n\t\t\t//Follow parameters.includeUnknown unless the river has been eliminated on distance.\n            passes = parameters.includeUnknown && !(distance > maxDistance)\n\n        }\n\n        if (!passes) {\n            //Remove the item if it fails\n            delete list[item]\n        }\n    }\n    return list\n\n}\n\n\nfunction flowFilter(list, parameters) {\n\n\tlet query = parameters.query\n\tlet min = query[0]\n\tlet max = query[1]\n\n    //Alert user when an actually useful flow search can't be performed.\n    if (window.usgsDataAge === undefined && (max !== 4 || min !== 0)) {\n        alert(\"Searching based on flow requires flow data, which has not yet loaded. The flow search is not being performed.\")\n        return list\n    }\n\n\tconsole.log(parameters)\n\n\tfor (let item in list) {\n\t\tlet river = list[item]\n\n        if (river.dam && parameters.includeDams) {\n            //Do nothing if the river is a dam and dams are to be included.\n        }\n        //If we do not know flow status, follow parameters.includeUnknown\n        else if (river.running === undefined) {\n            if (!parameters.includeUnknown) {\n                delete list[item]\n            }\n        }\n        //If we do know flow status, filter based on the flow.\n\t\telse if (river.running < min || river.running > max) {\n\t\t\tdelete list[item]\n\t\t}\n\t}\n\treturn list\n}\n\nfunction tagsFilter(list, parameters) {\n\tlet query = parameters.query\n\tlet components = parameters.query.split(\" \").join(\"\").split(\",\")\n\n\tfor (let item in list) {\n\t\tlet river = list[item]\n\n\t\tfor (let i=0;i<components.length;i++) {\n\t\t\tif (typeof river.tags !== \"string\" || !river.tags.toLowerCase().includes(components[i].toLowerCase())) {\n\t\t\t\tdelete list[item]\n\t\t\t}\n\t\t}\n\t}\n\treturn list\n}\n\n//Query is in form of:\n//{\n//  name: {\n//    type: \"matches\",\n//    query: \"potomac\"\n//},\n//section: {\n//    type: \"contains\",\n//    query: \"something\"\n//  },\n// skill: {\n//\ttype:\"\" //easier harder exactly from\n//\tvalue: 3 //An array of 2 if from\n//from is inclusive (From medium to hard)\n//},\n//location:{\n//\tdistance: 100 //Maximum distance in miles\n//\tlat: 78//Starting latitude\n//\tlon:-56 //Starting londitude\n//\tincludeUnknown: false //Do not eliminate if location not known\n//}\n//}\n\n\n\n\n//This doesn't work for difficulty and rating - no greater than or equal to.\n//That needs to be added\nfunction advancedSearch(list, query) {\n    //List is the array of river elements that we are searching\n    //Query is the search parameters\n    console.log(query)\n\n\tlet sorted = false\n\n    for (let property in query) {\n        //Iterate through each part of the query\n\n        let parameters = query[property]\n\n\n        if ([\"name\", \"section\", \"writeup\"].includes(property)) {\n            list = stringFilter(list, property, parameters)\n        }\n        else if (property === \"skill\") {\n            list = skillFilter(list, parameters)\n        }\n        else if (property === \"rating\") {\n            list = ratingFilter(list, parameters)\n        }\n        else if (property === \"location\") {\n            list = locationFilter(list, parameters)\n        }\n        else if (property === \"flow\") {\n            list = flowFilter(list, parameters)\n        }\n\t\telse if (property === \"tags\") {\n\t\t\tlist = tagsFilter(list, parameters)\n\t\t}\n\t\telse if (property === \"sort\") {\n\t\t\tlist = list.filter(item => item !== undefined) //The sort code isn't built to handle holes.\n\t\t\tlist = sortUtils.sort(parameters.query, list, parameters.reverse)\n\t\t\tsorted = true\n        }\n        else {\n            alert(\"Unable to search based on \" + property)\n        }\n    }\n\n\tlist = list.filter(item => item !== undefined)\n\n\tif (!sorted) {\n\t\tlist = sortUtils.sort(\"alphabetical\", list)\n\t}\n\n    return list\n}\n\n\n\n\n\n\nmodule.exports = {\n    normalSearch,\n    advancedSearch\n}\n\n\n\n\n\n\n//Prepare the Advanced Search button\nlet advanced_search_modal = document.getElementById('advanced-search-modal');\n\nlet span = document.getElementById(\"advanced-search-modal-close\").onclick = function() {\n    advanced_search_modal.style.display = \"none\"\n}\n\nwindow.addEventListener(\"click\", function(event) {\n    if (event.target === advanced_search_modal) {\n        advanced_search_modal.style.display = \"none\"\n    }\n})\n\ndocument.getElementById(\"advancedsearch\").addEventListener(\"click\", function() {\n    advanced_search_modal.style.display = \"block\"\n})\n","function lambert(lat1, lon1, lat2, lon2) {\n\t//Should be accurate to <100 meters\n\n\t//Parameters from WGS-84\n\tlet radius = 3963.1905919430524 //Equatorial radius in miles\n\tlet flattening = 0.0033528106647474805\n\n\tlat1 = lat1 / 180 * Math.PI\n\tlon1 = lon1 / 180 * Math.PI\n\tlat2 = lat2 / 180 * Math.PI\n\tlon2 = lon2 / 180 * Math.PI\n\n\tlet ratio = 1-flattening\n\n\tlet reducedLat1 = Math.atan(ratio*Math.tan(lat1))\n\tlet reducedLat2 = Math.atan(ratio*Math.tan(lat2))\n\n    //Spherical Law of Cosines\n\tlet angle = Math.acos(Math.sin(reducedLat1) * Math.sin(reducedLat2) + Math.cos(reducedLat1) * Math.cos(reducedLat2) * Math.cos(lon2-lon1))\n\n\tlet p = (reducedLat1+reducedLat2)/2\n\tlet q = (reducedLat2-reducedLat1)/2\n\tlet x = (angle - Math.sin(angle)) * (((Math.sin(p)**2)*(Math.cos(q)**2))/(Math.cos(angle/2)**2))\n\tlet y = (angle + Math.sin(angle)) *(((Math.cos(p)**2)*(Math.sin(q)**2))/(Math.sin(angle/2)**2))\n\treturn radius*(angle-((flattening/2)*(x+y)))\n}\n\n\nmodule.exports = {\n  lambert\n}\n","\n\nfunction drawColors(canvas, height) {\n\n    let context = canvas.getContext(\"2d\")\t\n\n    //Some browsers flip screen.width and screen.height on rotation - some don't\n\n    //window.innerWidth fails - the window is expanded to handle the width of the legend\n    //Then the legend doesn't resize (because the window has resized to it) \n\n    //This seems to be the only simple cross browser solution, although it fails if numerous rotations are made\n\n\tlet tooLowLightness = window.darkMode? \"23%\": \"67%\"\n\tlet tooHighLightness = window.darkMode? \"20%\": \"69%\"\n\tlet normalValueLightness = window.darkMode? \"25%\": \"70%\"\n\t\n\tcanvas.width = document.documentElement.clientWidth\n    canvas.height = height\n\n    let gradient = context.createLinearGradient(0,0,canvas.width,canvas.height) //Not sure about parameters  \n\n    let redColor = \"hsl(0,100%,\" + tooLowLightness + \")\"\n    let blueColor = \"hsl(240,100%,\" + tooHighLightness + \")\"\n\n    gradient.addColorStop(0, redColor)\n    gradient.addColorStop(0.08, redColor)\n    \n    let start = 0.08\n    let end = 0.92\n\n    let range = end-start\n    //240 is number of whole number hsl values\n\n    for (let i=0;i<=240;i++) {\n        gradient.addColorStop(start + (i/240*range), \"hsl(\" + i + \",100%,\" + normalValueLightness + \")\")\n    }\n\n    gradient.addColorStop(0.92, blueColor)\n    gradient.addColorStop(1, blueColor)\n\n    context.fillStyle = gradient\n    context.fillRect(0,0,canvas.width,canvas.height)\t\n\n}\n\n\n\nfunction drawText(canvas, fontSize) {\n\n    let context = canvas.getContext(\"2d\")\t\n    context.fillStyle = window.darkMode ? \"white\" : \"black\"\n\n    //The fourth parameter is the maximum width of the text in pixels\n    //rivers.run may want to use it\n\n    let height = fontSize\n\n    context.font = fontSize + \"px Arial\"\n\n    context.textAlign = \"start\"\n    context.fillText(\"Too Low\", 0, height)\n\n    context.textAlign = \"center\"\n    context.fillText(\"Low Flow\", canvas.width*0.28, height)\n    context.fillText(\"Mid Flow\", canvas.width/2, height)\n    context.fillText(\"High Flow\", canvas.width*0.72, height)\n\n\n    //Black text on blue is near inivisible - so use white text on blue\n    if (!window.darkMode) {context.fillStyle = \"white\"} \n\n    context.textAlign = \"end\"\n    context.fillText(\"Too High\", canvas.width, height, canvas.width*0.2)\n\n}\n\n\nfunction makeSticky(canvas) {\n    //Make the legend stick to the top of the screen\n\n    //position: sticky failed in Safari\n    //canvas.style.position = \"-webkit-sticky\"\n    //canvas.style.position = \"sticky\"\n    //canvas.style.top = 0\n\t\n\n\tcanvas.style.zIndex = 2 //Show up on top of stars. \n\t\n    let elementOffset = canvas.offsetTop\n    window.addEventListener(\"scroll\", function() {\n        let pageOffset = window.pageYOffset\n\t\t\n        if (pageOffset > elementOffset) {\n            canvas.style.position = \"fixed\"\n            canvas.style.top = 0\n            document.body.style.paddingTop = canvas.height + \"px\" //Avoid sudden jerk in page content\n        }\n        else {\n            canvas.style.position = \"\"\n            canvas.style.top = \"\"\n            document.body.style.paddingTop = 0\n        }\n    })\n}\n\n\nfunction updateLegend() {\n    try {\n    let canvas = document.getElementById(\"legend\")\n\n    canvas.getContext(\"2d\").clearRect(0,0,canvas.width,canvas.height)\n\n    let fontSize = parseFloat(window.getComputedStyle(document.getElementById(\"Rivers\").firstChild).getPropertyValue(\"font-size\"))\n\n    let height;\n    //Picked what I thought looked best\n    if (fontSize > 18) {\n        height = 10 + fontSize*2\n    }\n    else if (fontSize > 14.8){\n        fontSize *= 1.2\n        height = 10 + fontSize*2\n    }\n    else {\n        fontSize *= 1.4\n        height = 10 + fontSize*2\n    }\n\n    drawColors(canvas, height)\n    drawText(canvas, fontSize)\n    makeSticky(canvas)\n    }\n    catch (e) {\n        //Something went badly wrong. Prevent from taking down whole page.\n        console.error(\"Legend failed to draw. Logging error.\")\n        console.error(e)\n    }\n\n}\n\nwindow.addEventListener(\"resize\", updateLegend)\n//orientationchange should be fired on resize, but some browsers (such as Safari) do not\nwindow.addEventListener(\"orientationchange\", updateLegend)\nwindow.addEventListener(\"colorSchemeChanged\", updateLegend)\n\nupdateLegend()"],"sourceRoot":""}