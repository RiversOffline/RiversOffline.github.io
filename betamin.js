function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,f=Array(a.length);b<a.length;b++)f[b]=a[b];return f}return Array.from(a)}function _asyncToGenerator(a){return function(){var b=a.apply(this,arguments);return new Promise(function(f,g){function h(j,k){try{var l=b[j](k),m=l.value}catch(n){return void g(n)}return l.done?void f(m):Promise.resolve(m).then(function(n){h('next',n)},function(n){h('throw',n)})}return h('next')})}}if(navigator.onLine){var dc=caches.delete('Temporary');dc.then(LoadSW()),dc.catch(function(a){console.warn(a),LoadSW()})}else LoadSW();function LoadSW(){if('serviceWorker'in navigator){var a=navigator.serviceWorker.register('https://rivers.run/betaserviceworker.js');a.then(function(){console.log('Registered and Ready!'),MainCode()}),a.catch(function(b){console.warn(b),MainCode()})}else console.log('No ServiceWorker Support'),MainCode()}function MainCode(){var LoadStringData=function(){var G=_asyncToGenerator(regeneratorRuntime.mark(function I(J){var K;return regeneratorRuntime.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,fetch(J);case 2:return K=M.sent,M.next=5,K.text();case 5:return K=M.sent,M.abrupt('return',K);case 7:case'end':return M.stop();}},I,this)}));return function(){return G.apply(this,arguments)}}(),FetchData=function(){var G=_asyncToGenerator(regeneratorRuntime.mark(function I(J){var K,L,M,N;return regeneratorRuntime.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,D(h(J));case 2:return K=P.sent,L=K.split('\n')[16].slice(1).trim(),M=m(l(k(j(K)))),N=n(M),P.abrupt('return',q(o(M),L,N));case 7:case'end':return P.stop();}},I,this)}));return function(){return G.apply(this,arguments)}}(),LoadAndRender=function(){var G=_asyncToGenerator(regeneratorRuntime.mark(function I(J,K,L,M,N,O,P,Q){var R,S,T,U,W,X;return regeneratorRuntime.wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,E(J);case 2:R=Z.sent,K.innerHTML='---',S=1,Z.prev=5,T=0;case 7:if(!(T<R.cfs.length)){Z.next=14;break}if(void 0===R.cfs[T]){Z.next=11;break}return S=0,Z.abrupt('break',14);case 11:T++,Z.next=7;break;case 14:Z.next=18;break;case 16:Z.prev=16,Z.t0=Z['catch'](5);case 18:U=1,Z.prev=19,T=0;case 21:if(!(T<R.height.length)){Z.next=28;break}if(void 0===R.height[T]){Z.next=25;break}return U=0,Z.abrupt('break',28);case 25:T++,Z.next=21;break;case 28:Z.next=32;break;case 30:Z.prev=30,Z.t1=Z['catch'](19);case 32:if(0!==S){Z.next=58;break}W=R.cfs.length-1;case 34:if(!(0<=W)){Z.next=41;break}if(isNaN(+R.cfs[W])||0===+R.cfs[W]||void 0===R.cfs[W]){Z.next=38;break}return K.innerHTML=R.cfs[W]+' cfs',Z.abrupt('break',41);case 38:W--,Z.next=34;break;case 41:if(0!==U){Z.next=55;break}K.innerHTML+=', ',W=R.height.length-1;case 44:if(!(0<=W)){Z.next=51;break}if(isNaN(+R.height[W])||0===+R.height[W]||void 0===R.height[W]){Z.next=48;break}return K.innerHTML+=R.height[W]+' feet',Z.abrupt('break',51);case 48:W--,Z.next=44;break;case 51:r('',R.Timezone,R.timeframe,R.Source,L,0,R.cfs,O,2),r('',R.Timezone,R.timeframe,R.Source,L,0,R.height,P,2,1),Z.next=56;break;case 55:r('cfs',R.Timezone,R.timeframe,R.Source,L,0,R.cfs,O);case 56:Z.next=74;break;case 58:if(0!==U){Z.next=70;break}r('height',R.Timezone,R.timeframe,R.Source,L,0,R.height,P),W=R.height.length-1;case 61:if(!(0<=W)){Z.next=68;break}if(isNaN(+R.height[W])||0===+R.height[W]||void 0===R.height[W]){Z.next=65;break}return K.innerHTML=R.height[W]+' feet',Z.abrupt('break',68);case 65:W--,Z.next=61;break;case 68:Z.next=74;break;case 70:X=L.getContext('2d'),X.textAlign='center',X.font=M.width/35+'px Arial',X.fillText('No Flow Data Currently Avalible for this Site ('+J+')',L.width/2,L.height/2);case 74:S=1,Z.prev=75,T=0;case 77:if(!(T<R.temp.length)){Z.next=84;break}if(void 0===R.temp[T]){Z.next=81;break}return S=0,Z.abrupt('break',84);case 81:T++,Z.next=77;break;case 84:Z.next=88;break;case 86:Z.prev=86,Z.t2=Z['catch'](75);case 88:0===S?(R.temp=R.temp.map(function($){return 1.8*$+32}),r('',R.Timezone,R.timeframe,R.Source,M,0,R.temp,'#FF0000',3,'#0000FF')):(X=M.getContext('2d'),X.textAlign='center',X.font=M.width/35+'px Arial',X.fillText('No Temperature Data Currently Avalible for this Site ('+J+')',M.width/2,M.height/2)),S=1,Z.prev=90,T=0;case 92:if(!(T<R.precip.length)){Z.next=99;break}if(void 0===R.precip[T]){Z.next=96;break}return S=0,Z.abrupt('break',99);case 96:T++,Z.next=92;break;case 99:Z.next=103;break;case 101:Z.prev=101,Z.t3=Z['catch'](90);case 103:0===S?r('Precipitation',R.Timezone,R.timeframe,R.Source,N,0,R.precip,Q):(X=N.getContext('2d'),X.font=N.width/35+'px Arial',X.textAlign='center',X.fillText('No Precipitation Data Currently Avalible for this Site ('+J+')',N.width/2,N.height/2));case 104:case'end':return Z.stop();}},I,this,[[5,16],[19,30],[75,86],[90,101]])}));return function(){return G.apply(this,arguments)}}();function a(G){return document.getElementById(G)}function b(){localStorage.setItem('TimeStamp',Date.now()),caches.delete('rivers.run').then(function(){window.location.reload(!0)}).catch(function(){window.location.reload(!0)})}function f(){try{if(null!==localStorage.getItem('TimeStamp')&&6e5<Date.now()-localStorage.getItem('TimeStamp')){var G=Math.floor(Math.floor((Date.now()-localStorage.getItem('TimeStamp'))/1e3)/60),I=Math.floor(G/60);G%=60;var J=Math.floor(I/24);I%=24;var K='';0!==J&&(1===J?K=K+J+' day ':K=K+J+' days '),0!==I&&(1===I?K=K+I+' hour ':K=K+I+' hours '),0!==G&&(1===G?K=K+G+' minute ':K=K+G+' minutes '),a('ReloadAllText').innerHTML='You\'re viewing a cached version of this site from '+K+' ago.'}}catch(L){console.warn(L)}}function g(){document.documentElement.style.setProperty('--screenheight',Math.floor(window.innerHeight/1.15)+'px');var G=750/window.innerWidth;G=1>G?Math.pow(G,0.55):2.5>G?Math.pow(G,0.6):Math.max(Math.pow(G,0.6),Math.pow(2.67,0.6)),G=2.4*G+'vw',document.documentElement.style.setProperty('--textsize',G)}function h(G){if('number'==typeof G&&console.warn('A number ('+G+') was passed where a string is needed. If the number contained leading zeros that CreateURL is unable to replace, you may get an error.'),G+='',8>G.length){var I=G;G='0'.repeat(8-G.length)+G,console.warn('Changed '+I+' to '+G+'. It is reccomended to pass strings instead of integers so that modification is not required.')}var K=new Date(Date.now()),L=K.getFullYear()+'-'+(K.getMonth()+1)+'-'+K.getDate();K=new Date(Date.now()-8.64e7*1);var M=K.getFullYear()+'-'+(K.getMonth()+1)+'-'+K.getDate();return'https://waterdata.usgs.gov/nwis/uv?cb_00045=on&cb_00010=on&cb_00045=on&cb_00060=on&cb_00065=on&format=rdb&site_no='+G+'&period=&begin_date='+M+'&end_date='+L}function j(G){for(G=G.split('\n');'#'===G[0][0];)G.shift();return G}function k(G){return G.map(function(I){return I.split('\t')})}function l(G){return G.map(function(I){return I.splice(0,2),I})}function m(G){return G.map(function(I){for(var J=3;J<I.length;++J)I.splice(J,1);return I})}function n(G){var I=G[2][1];return G=G.splice(2,Array.length-3),G.map(function(J){if(J[1]!==I)throw'Time zones '+I+' and '+J[1]+' do not match!'}),I}function o(G){return G.map(function(I){return I.splice(1,1),I})}function q(G,I,J){var K={};K.Source=I,K.Timezone=J,K.timeframe=G.map(function(Q){return Q[0]}),K.timeframe.splice(0,2),K.timeframe.pop(),G.pop();for(var L,M=0;M<G[0].length;M++)if(-1!==G[0][M].indexOf('00060')){L=M;break}for(var N,M=0;M<G[0].length;M++)if(-1!==G[0][M].indexOf('00065')){N=M;break}for(var O,M=0;M<G[0].length;M++)if(-1!==G[0][M].indexOf('00045')){O=M;break}for(var P,M=0;M<G[0].length;M++)if(-1!==G[0][M].indexOf('00010')){P=M;break}return void 0!==L&&(K.cfs=G.map(function(Q){return Q[L]}),K.cfs.splice(0,2)),void 0!==N&&(K.height=G.map(function(Q){return Q[N]}),K.height.splice(0,2)),void 0!==O&&(K.precip=G.map(function(Q){return Q[O]}),K.precip.splice(0,2)),void 0!==P&&(K.temp=G.map(function(Q){return'NaN'!==+Q[P]+''&&''!==Q[P]?Q[P]:NaN}),K.temp.splice(0,2)),K}function r(G,I,J,K,L,M,N,O,P,Q){function R(qa){return Math.round((qa-ba)*_)}function S(qa){return Math.round(U-(qa-aa)*$)}if(3===P)var T=Q;2!==P&&(Q=0);var U=0.8*L.height,W=L.width,X=L.getContext('2d');if(!isNaN(+M)){M=[];for(var Y=0;Y<N.length;Y++)M.push(Y*W)}M.length!==N.length&&console.warn('Uneven amount of datapoints. '+M.length+' horizontal points found, but '+N.length+' vertical points found.'),void 0===O&&(O='#000000'),X.strokeStyle=O,X.lineWidth=Math.ceil(Math.min(W,U)/120),X.beginPath(),W*=2===P?0.86:0.93;for(var Z=[],Y=0;Y<N.length;Y++)'NaN'!==+N[Y]+''&&''!==N[Y]&&Z.push(N[Y]);var $=Math.max.apply(Math,Z)-Math.min.apply(Math,Z),_=Math.max.apply(Math,_toConsumableArray(M))-Math.min.apply(Math,_toConsumableArray(M));$=U/$,_=W/_;var aa=Math.min.apply(Math,Z),ba=Math.min.apply(Math,_toConsumableArray(M));ba-=0.07*(Math.max.apply(Math,_toConsumableArray(M))-Math.min.apply(Math,_toConsumableArray(M)));var ca=Math.floor(0.07*L.width/2.6);if(X.font=ca+'px serif',9===O.length&&(O=O.slice(0,7)),X.fillStyle=O,3===P){var da=X.createLinearGradient(0,0,0,U);da.addColorStop(0,O),da.addColorStop(1,T),X.strokeStyle=da,X.fillStyle=da}start=0===Q||void 0===Q?1:L.width-0.07*L.width;for(var ea,Y=1;11>Y;Y++)ea=(Math.max.apply(Math,Z)-Math.min.apply(Math,Z))*((Y-1)/10)+Math.min.apply(Math,Z),1e3<=ea?ea=Math.round(ea):(ea=ea.toFixed(3-(Math.round(ea)+'').length),+ea===Math.round(ea)&&(ea=Math.round(ea))),X.fillText(ea,start,U*(11-Y)/10-5);ea=(Math.max.apply(Math,Z)-Math.min.apply(Math,Z))*((Y-1)/10)+Math.min.apply(Math,Z),1e3<=ea?ea=Math.round(ea):(ea=ea.toFixed(3-(Math.round(ea)+'').length),+ea===Math.round(ea)&&(ea=Math.round(ea))),X.fillText(ea,start,27);var ca=Math.floor(0.07*L.width/2.8);X.font=ca+'px serif',9===O.length&&(O=O.slice(0,7)),X.fillStyle='black';var fa=new Date(J[0]),ga=new Date(J[J.length-1]),ha=new Date((ga-fa)/2+fa.getTime()),ia=fa.getHours(),ja=ga.getHours(),ka=ha.getHours();2>(fa.getHours()+'').length&&(ia+='0'),ia+=':'+fa.getMinutes(),2>(fa.getMinutes()+'').length&&(ia+='0'),ia+=' '+(fa.getMonth()+1)+'/'+fa.getDate()+'/'+fa.getFullYear(),2>(ga.getHours()+'').length&&(ja+='0'),ja+=':'+ga.getMinutes(),2>(ga.getMinutes()+'').length&&(ja+='0'),ja+=' '+(ga.getMonth()+1)+'/'+ga.getDate()+'/'+ga.getFullYear(),2>(ha.getHours()+'').length&&(ka+='0'),ka+=':'+ha.getMinutes(),2>(ha.getMinutes()+'').length&&(ka+='0'),ka+=' '+(ha.getMonth()+1)+'/'+ha.getDate()+'/'+ha.getFullYear(),X.fillText(ia+' ('+I+')',10,L.height*(11/12)-0.06*L.height-12),X.textAlign='end',X.fillText(ja+' ('+I+')',L.width-10,L.height*(11/12)-0.06*L.height-12),X.textAlign='center',X.fillText(ka+' ('+I+')',L.width/2,L.height*(11/12)-0.06*L.height-12),X.textAlign='start';var ca=Math.floor(0.07*L.width/2.4);if(X.font=ca+'px serif',X.fillStyle=O,3===P){var da=X.createLinearGradient(0,U,200,U);da.addColorStop(0,O),da.addColorStop(1,T),X.strokeStyle=da,X.fillStyle=da}if(2===P)0===Q||void 0===Q?X.fillText('Flow (Cubic Feet/Second)',start+5,L.height*(11/12)):X.fillText('Gage Height (Feet)',start-195,L.height*(11/12));else if(3===P)X.fillText('Tempreture (\xB0F)',start+5,L.height*(11/12));else if('Precipitation'===G){X.fillText('Precipitation (Inches)',start+5,L.height*(11/12));var la=0,ma=0,na=N.slice(-96),na=na.map(Number);na.forEach(function(qa){la+=qa}),na=na.slice(-48),na.forEach(function(qa){ma+=qa}),la=la.toFixed(2),ma=ma.toFixed(2),X.fillText('Last 24 Hours: '+la+' in',L.width-700,L.height*(11/12)),X.fillText('Last 12 Hours: '+ma+' in',L.width-330,L.height*(11/12))}else'cfs'===G?X.fillText('Flow (Cubic Feet/Second)',start+5,L.height*(11/12)):'height'===G?X.fillText('Gage Height (Feet)',start+5,L.height*(11/12)):X.fillText('Labeling Error...',start+5,L.height*(11/12));if(3===P){var da=X.createLinearGradient(0,0,0,L.height);da.addColorStop(0,O),da.addColorStop(1,T),X.strokeStyle=da,X.fillStyle=da}X.fillStyle='black',X.textAlign='center',X.fillText('Gage: '+K,L.width/2,L.height-10),X.textAlign='start';for(var oa=0;oa<Math.min(N.length,M.length);oa++)if('NaN'!==+N[oa]+''&&''!==N[oa]){X.moveTo(R(M[oa]),S(N[oa]));break}for(var pa=1,Y=oa;Y<Math.min(N.length,M.length);Y++)'NaN'!==+N[Y]+''&&''!==N[Y]?1==pa?X.lineTo(R(M[Y]),S(N[Y])):(X.moveTo(R(M[Y]),S(N[Y])+10),X.lineTo(R(M[Y]),S(N[Y])),pa=1):pa=0;X.stroke(),X.beginPath(),X.lineWidth=Math.ceil(X.lineWidth/10),X.strokeStyle='#000000AA';for(var Y=1;11>Y;Y++)X.moveTo(0,U*(11-Y)/10),X.lineTo(L.width,U*(11-Y)/10);X.stroke()}function s(G){var I=G.slice(0,-7),J=a(I+'canvas1'),K=a(I+'canvas2'),L=a(I+'canvas3'),M=a(I+'button1'),N=a(I+'button2'),O=a(I+'button3');J.style.display='block',K.style.display='none',L.style.display='none',M.className='FlowButton',N.className='Unselected',O.className='Unselected'}function t(G){var I=G.slice(0,-7),J=a(I+'canvas1'),K=a(I+'canvas2'),L=a(I+'canvas3'),M=a(I+'button1'),N=a(I+'button2'),O=a(I+'button3');K.style.display='block',J.style.display='none',L.style.display='none',M.className='Unselected',N.className='TempButton',O.className='Unselected'}function u(G){var I=G.slice(0,-7),J=a(I+'canvas1'),K=a(I+'canvas2'),L=a(I+'canvas3'),M=a(I+'button1'),N=a(I+'button2'),O=a(I+'button3');L.style.display='block',K.style.display='none',J.style.display='none',M.className='Unselected',N.className='Unselected',O.className='PrecipButton'}function v(G,I,J){for(var K='',L=0;10>L;L++)K+=Math.random()*Math.pow(2,53)+'';var M=document.createElement('canvas'),N=document.createElement('canvas'),O=document.createElement('canvas');M.width=1200,N.width=1200,O.width=1200,M.height=800,N.height=800,O.height=800,F(I,J,M,N,O,'#00AAFF80','#0000FF80','#0066FF80').catch(function(T){J.innerHTML='Error...',console.warn(T)}),G.appendChild(M),N.style.display='none',O.style.display='none',G.appendChild(N),G.appendChild(O),M.id=K+'canvas1',N.id=K+'canvas2',O.id=K+'canvas3';var P=document.createElement('button');P.innerHTML='Flow Info',P.addEventListener('click',function(){s(this.id)}),P.className='FlowButton',P.id=K+'button1';var Q=document.createElement('button');Q.innerHTML='Tempreture',Q.addEventListener('click',function(){t(this.id)}),Q.className='Unselected',Q.id=K+'button2';var R=document.createElement('button');R.innerHTML='Precipitation',R.addEventListener('click',function(){u(this.id)}),R.className='Unselected',R.id=K+'button3';var S=document.createElement('div');return S.appendChild(P),S.appendChild(R),S.appendChild(Q),S.className='canvasbuttons',S}function w(G,I,J,K,L,M,N){function O(X){var Y=document.createElement('Span');Y.innerHTML=void 0===X?'Not Found':X,Y.className='riverspan',Q.appendChild(Y)}var P=a('Rivers'),Q=document.createElement('button');Q.className='accordion';var R=document.createElement('Div');if(R.className='panel',O(G),O(I),O(J),'Rating'===K||'Below'===K||'Not Found'===K)O(K);else{var S;switch(parseInt(K)){case 1:S='1Star';break;case 2:S='2Stars';break;case 3:S='3Stars';break;case 4:S='4Stars';break;case 5:S='5Stars';break;default:S='Error';}if('Error'===S)O('???');else{var T=document.createElement('span'),U=document.createElement('img');U.src='https://resources.rivers.run/'+S+'.png',U.alt=S[0]+' Stars',T.className='riverspan',T.appendChild(U),Q.appendChild(T)}}if(O(L),R.innerHTML=void 0===N?'This River has no Writeup.':N,'Flow Info'===M)O(M),Q.id='LabelRow';else if(16>(M+'').length&&void 0!==M&&0!==+M&&!isNaN(+M)){var W=document.createElement('span');W.className='riverspan',W.innerHTML='Loading From USGS...',Q.appendChild(W),R.appendChild(v(R,M,W))}else void 0!==M&&0!==+M&&O('Bad Gage #');Q.addEventListener('click',function(){this.classList.toggle('active');var X=this.nextElementSibling;X.style.maxHeight?(X.style.maxHeight=null,X.style.padding='0px',X.hidden='hidden'):(X.style.maxHeight='100%',X.style.padding='10px',X.hidden='')}),'Relevant'===I&&(Q.id='lessrelevant'),R.hidden='hidden',P.appendChild(Q),P.appendChild(R)}function x(){for(var G=a('Rivers');G.firstChild;)G.removeChild(G.firstChild);w('River Name','Section','Skill','Rating','Length','Flow Info','The River\'s Write-up will appear here.')}function y(G){function I(L){var M=K+40;for(K;K<Math.min(M,G.length);K++){var N=G[K];if(L===A)w(N.Name,N.Section,N.Difficulty,N.Quality,N.Length+' miles',N.USGS,N.Writeup);else break}K<G.length&&L===A&&setTimeout(function(){requestAnimationFrame(function(){I(L)})},60)}A+=1;var J=A;x();var K=0;0<G.length&&I(J)}function z(){for(var O,G=a('SearchBox').value.toLowerCase().trim(),I=[],J=[],K=[],L=[],M=[],N=0;N<RiverArray.length;N++)O=RiverArray[N],-1===O.Tags.toLowerCase().indexOf(G)?-1===O.Name.toLowerCase().indexOf(G)?-1===O.Section.toLowerCase().indexOf(G)?-1===O.Difficulty.toLowerCase().indexOf(G)?-1!==O.Writeup.toLowerCase().indexOf(G)&&M.push(O):0===O.Difficulty.toLowerCase().indexOf(G)?L.push(O):-1===O.Writeup.toLowerCase().indexOf(G)&&M.push(O):K.push(O):J.push(O):-1===O.Name.toLowerCase().indexOf(G)?I.push(O):I.splice(0,0,O);for(var N=0;N<J.length;N++)I.push(J[N]);for(var N=0;N<K.length;N++)I.push(K[N]);for(var N=0;N<L.length;N++)I.push(L[N]);0<M.length&&I.push({Name:'Less',Section:'Relevant',Difficulty:'Results',Quality:'Below',Length:'',Writeup:'Results below contained the search query, but not in a way that was clearly related to the search query. The results shown below may not be what you are looking for.'});for(var N=0;N<M.length;N++)I.push(M[N]);y(I),0===I.length&&w('Not Found','Not Found','Not Found','Not Found','Not Found','No Rivers were found for your search query.')}try{null!==localStorage.getItem('TimeStamp')&&6e5<Date.now()-localStorage.getItem('TimeStamp')?(f(),setInterval(f,6e4),a('ReloadAll').hidden='',navigator.onLine&&(a('ReloadAllButton').style='display: inline'),window.addEventListener('offline',function(){a('ReloadAllButton').style='display: none'}),window.addEventListener('offline',function(){a('ReloadAllButton').style='display: inline'}),a('ReloadAllButton').addEventListener('click',b),a('ReloadAllButton').value='Update Now',f()):null===localStorage.getItem('TimeStamp')&&localStorage.setItem('TimeStamp',Date.now())}catch(G){console.warn(G)}window.addEventListener('resize',function(){setTimeout(g,100)});var A=0;y(RiverArray),g(),a('SearchBox').addEventListener('keydown',function(){setTimeout(z,20)});var B=window.location.href;B=decodeURIComponent(B);var C=B.slice(B.indexOf('?')+1);0===C.indexOf('q=cache:')&&(C='',setTimeout(function(){alert('It appears that you have been redirected from Google\'s Webcache to this page. You are now at the actual site.')},1e3)),B!==C&&(document.getElementById('SearchBox').value=C,z())}
